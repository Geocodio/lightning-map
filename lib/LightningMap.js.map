{"version":3,"sources":["webpack://LightningMap/webpack/universalModuleDefinition","webpack://LightningMap/webpack/bootstrap","webpack://LightningMap/./src/Lightning.js","webpack://LightningMap/./src/Tile.js","webpack://LightningMap/./src/TileConversion.js","webpack://LightningMap/./src/defaultOptions.js","webpack://LightningMap/./src/index.js"],"names":["DEBOUNCE_INTERVAL_MS","Lightning","canvas","options","getContext","Error","context","Object","assign","initializeState","attachEvents","applyStyles","draw","bind","window","requestAnimationFrame","state","canvasDimensions","width","height","tiles","grid","gridHash","centerOffset","moveOffset","targetMoveOffset","moveAnimationStart","dragStartPosition","lastEventActionTime","targetZoom","zoom","zoomAnimationStart","zoomValueIsValid","Date","getTime","performance","now","milliSecondsSinceLastEvent","addEventListener","event","preventDefault","isReadyForEvent","deltaY","setZoom","clientX","clientY","x","y","panAccelerationMultiplier","style","cursor","canvasSize","tilesCount","Math","ceil","tileSize","tileAreaMultiplier","time","targetMoveOffsetChanged","values","join","timestamp","length","progress","max","percentage","easeOutQuad","targetHasBeenReached","latLon","pixelToLatLon","center","newZoom","floor","scale","centerY","lat2tile","centerX","lon2tile","gridNeedsToBeUpdated","horizontalTiles","getTilesCount","verticalTiles","centerYRounded","centerXRounded","relativeTileOffset","abs","startX","startY","tileX","tileY","tile","ensureTileAsset","expandTilesOnLoad","id","Image","src","source","setTransform","updateMoveOffset","updateZoom","calculateGrid","fillStyle","fillRect","horizontalOverflow","verticalOverflow","strokeStyle","drawImage","err","debug","strokeRect","Tile","_x","_y","_zoom","TileConversion","lon","rounded","pow","lat","log","tan","PI","cos","z","n","atan","exp","ne","tile2lat","tile2lon","sw","pixel","mapDimensions","pointDiff","defaultOptions","tileZoomMultiplier","init"],"mappings":"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","file":"LightningMap.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"LightningMap\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"LightningMap\"] = factory();\n\telse\n\t\troot[\"LightningMap\"] = factory();\n})(window, function() {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./src/index.js\");\n","import TileConversion from './TileConversion';\nimport Tile from './Tile';\nimport defaultOptions from './defaultOptions';\n\nconst DEBOUNCE_INTERVAL_MS = 200;\n\nexport default class Lightning {\n\n  constructor(canvas, options) {\n    if (!canvas || !canvas.getContext) {\n      throw new Error('Could not get canvas context');\n    }\n\n    this.canvas = canvas;\n    this.context = this.canvas.getContext('2d');\n\n    this.options = Object.assign({}, defaultOptions, options);\n\n    this.initializeState();\n    this.attachEvents();\n    this.applyStyles();\n\n    this.draw = this.draw.bind(this);\n    window.requestAnimationFrame(this.draw);\n  }\n\n  initializeState() {\n    this.state = {\n      canvasDimensions: [this.canvas.width, this.canvas.height],\n      tiles: {},\n      grid: [],\n      gridHash: null,\n      centerOffset: [0, 0],\n      moveOffset: [0, 0],\n      targetMoveOffset: [0, 0],\n      moveAnimationStart: null,\n      dragStartPosition: null,\n      lastEventActionTime: null,\n      targetZoom: this.options.zoom,\n      zoomAnimationStart: null\n    };\n  }\n\n  setZoom(zoom) {\n    if (this.zoomValueIsValid(zoom)) {\n      this.state.lastEventActionTime = new Date().getTime();\n      this.state.zoomAnimationStart = window.performance.now();\n      this.state.targetZoom = zoom;\n    }\n  }\n\n  zoomValueIsValid(zoom) {\n    return zoom >= 1 && zoom <= 18;\n  }\n\n  isReadyForEvent() {\n    if (!this.state.lastEventActionTime) {\n      return true;\n    }\n\n    const now = new Date().getTime();\n    const milliSecondsSinceLastEvent = now - this.state.lastEventActionTime;\n\n    return milliSecondsSinceLastEvent > DEBOUNCE_INTERVAL_MS;\n  }\n\n  attachEvents() {\n    this.canvas.addEventListener('wheel', event => {\n      event.preventDefault();\n\n      if (this.isReadyForEvent()) {\n        if (event.deltaY > 5) {\n          this.setZoom(this.options.zoom - 2);\n        } else if (event.deltaY < -5) {\n          this.setZoom(this.options.zoom + 2);\n        }\n      }\n    });\n\n    this.canvas.addEventListener('mousedown', event => {\n      event.preventDefault();\n      this.state.dragStartPosition = [event.clientX, event.clientY];\n    });\n\n    this.canvas.addEventListener('mouseup', event => {\n      event.preventDefault();\n      this.state.dragStartPosition = null;\n    });\n\n    this.canvas.addEventListener('mousemove', event => {\n      event.preventDefault();\n\n      if (this.state.dragStartPosition) {\n        this.state.lastEventActionTime = new Date().getTime();\n        const x = this.state.dragStartPosition[0] - event.clientX;\n        const y = this.state.dragStartPosition[1] - event.clientY;\n\n        this.state.targetMoveOffset = [\n          -x * this.options.panAccelerationMultiplier,\n          -y * this.options.panAccelerationMultiplier\n        ];\n\n        this.state.moveAnimationStart = window.performance.now();\n      }\n\n      return false;\n    });\n  }\n\n  applyStyles() {\n    this.canvas.style.cursor = 'grab';\n  }\n\n  getTilesCount(canvasSize) {\n    let tilesCount = Math.ceil(canvasSize / this.options.tileSize) * this.options.tileAreaMultiplier;\n\n    if (tilesCount % 2 === 0) {\n      tilesCount++;\n    }\n\n    return tilesCount;\n  }\n\n  easeOutQuad(time) {\n    return time * (2 - time);\n  }\n\n  updateMoveOffset() {\n    const targetMoveOffsetChanged = Object.values(this.state.moveOffset).join(',')\n      !== Object.values(this.state.targetMoveOffset).join(',');\n\n    if (targetMoveOffsetChanged) {\n      const timestamp = performance.now();\n\n      const length = 1500;\n      const progress = Math.max(timestamp - this.state.moveAnimationStart, 0);\n      const percentage = this.easeOutQuad(progress / length);\n\n      this.state.moveOffset = [\n        this.state.moveOffset[0] + (this.state.targetMoveOffset[0] - this.state.moveOffset[0]) * percentage,\n        this.state.moveOffset[1] + (this.state.targetMoveOffset[1] - this.state.moveOffset[1]) * percentage\n      ];\n\n      const targetHasBeenReached = Object.values(this.state.moveOffset).join(',')\n        === Object.values(this.state.targetMoveOffset).join(',');\n\n      if (targetHasBeenReached) {\n        const latLon = TileConversion.pixelToLatLon(\n          this.state.moveOffset,\n          this.options.center,\n          this.options.zoom,\n          this.options.canvasDimensions,\n          this.options.tileSize\n        );\n\n        this.state.moveOffset = [0, 0];\n        this.state.targetMoveOffset = [0, 0];\n        this.options.center = latLon;\n      }\n    }\n  }\n\n  updateZoom() {\n    if (this.options.zoom !== this.state.targetZoom) {\n      const timestamp = performance.now();\n\n      const length = 10000;\n      const progress = Math.max(timestamp - this.state.zoomAnimationStart, 0);\n      const percentage = this.easeOutQuad(progress / length);\n\n      const newZoom = this.options.zoom + (this.state.targetZoom - this.options.zoom) * percentage;\n\n      this.options.zoom = this.state.targetZoom > this.options.zoom ? Math.ceil(newZoom) : Math.floor(newZoom);\n\n      let scale = this.options.zoom - newZoom;\n\n      if (this.state.targetZoom > this.options.zoom) {\n        scale += 1;\n      }\n\n      return scale;\n    }\n\n    return 1;\n  }\n\n  calculateGrid() {\n    const centerY = TileConversion.lat2tile(this.options.center[0], this.options.zoom, false);\n    const centerX = TileConversion.lon2tile(this.options.center[1], this.options.zoom, false);\n    const gridHash = [centerY, centerX].join(',');\n\n    const gridNeedsToBeUpdated = this.state.gridHash !== gridHash;\n\n    if (!gridNeedsToBeUpdated) {\n      return;\n    }\n\n    const horizontalTiles = this.getTilesCount(this.state.canvasDimensions[0]);\n    const verticalTiles = this.getTilesCount(this.state.canvasDimensions[1]);\n\n    // noinspection JSSuspiciousNameCombination\n    const centerYRounded = Math.floor(centerY);\n    const centerXRounded = Math.floor(centerX);\n\n    const relativeTileOffset = [\n      Math.abs(centerX - centerXRounded),\n      Math.abs(centerY - centerYRounded)\n    ];\n\n    this.state.centerOffset = [\n      this.options.tileSize / 2 - (relativeTileOffset[0] * this.options.tileSize),\n      this.options.tileSize / 2 - (relativeTileOffset[1] * this.options.tileSize)\n    ];\n\n    const startX = centerXRounded - Math.floor(horizontalTiles / 2);\n    const startY = centerYRounded - Math.floor(verticalTiles / 2);\n\n    let grid = [];\n\n    for (let y = 0; y < verticalTiles; y++) {\n      for (let x = 0; x < horizontalTiles; x++) {\n        if (!grid[x]) {\n          grid[x] = [];\n        }\n\n        const tileX = startX + x;\n        const tileY = startY + y;\n\n        if (tileX >= 0 && tileY >= 0) {\n          const tile = new Tile(tileX, tileY, this.options.zoom);\n\n          this.ensureTileAsset(tile);\n          grid[x][y] = tile;\n        }\n      }\n    }\n\n    this.state.grid = grid;\n    this.state.gridHash = gridHash;\n  }\n\n  ensureTileAsset(tile, expandTilesOnLoad = true) {\n    if (!(tile.id in this.state.tiles)) {\n      this.state.tiles[tile.id] = new Image();\n      this.state.tiles[tile.id].src = this.options.source(Math.floor(tile.x), Math.floor(tile.y), tile.zoom);\n    }\n  }\n\n  draw() {\n    this.context.setTransform(1, 0, 0, 1, 0, 0);\n\n    this.updateMoveOffset();\n    const scale = this.updateZoom();\n\n    if (scale !== 1) {\n      this.context.scale(scale, scale);\n    }\n\n    this.calculateGrid();\n\n    this.context.fillStyle = '#eee';\n    this.context.fillRect(0, 0, this.state.canvasDimensions[0], this.state.canvasDimensions[1]);\n\n    const horizontalTiles = this.getTilesCount(this.state.canvasDimensions[0]);\n    const verticalTiles = this.getTilesCount(this.state.canvasDimensions[1]);\n\n    const horizontalOverflow = (horizontalTiles * this.options.tileSize) - this.state.canvasDimensions[0];\n    const verticalOverflow = (verticalTiles * this.options.tileSize) - this.state.canvasDimensions[1];\n\n    this.context.fillStyle = '#C5DFF6';\n    this.context.strokeStyle = 'green';\n\n    for (let y = 0; y < verticalTiles; y++) {\n      for (let x = 0; x < horizontalTiles; x++) {\n        const tile = this.state.grid[x][y];\n\n        if (tile) {\n          const tileX = this.state.moveOffset[0] + this.state.centerOffset[0]\n            + (x * this.options.tileSize - horizontalOverflow / 2);\n\n          const tileY = this.state.moveOffset[1] + this.state.centerOffset[1]\n            + (y * this.options.tileSize - verticalOverflow / 2);\n\n          try {\n            this.context.drawImage(\n              this.state.tiles[tile.id],\n              tileX, tileY,\n              this.options.tileSize, this.options.tileSize\n            );\n          } catch (err) {\n            this.context.fillRect(tileX, tileY, this.options.tileSize, this.options.tileSize);\n          }\n\n          if (this.options.debug) {\n            this.context.strokeRect(tileX, tileY, this.options.tileSize, this.options.tileSize);\n          }\n        }\n      }\n    }\n\n    /*\n    this.context.fillStyle = 'rgba(200, 0, 0, 0.7)';\n    this.context.beginPath();\n    this.context.arc(this.state.canvasDimensions[0] / 2, this.state.canvasDimensions[1] / 2, 10, 0, 2 * Math.PI);\n    this.context.fill();\n    */\n\n    window.requestAnimationFrame(this.draw);\n  }\n\n}\n","export default class Tile {\n  constructor(x, y, zoom) {\n    this._x = x;\n    this._y = y;\n    this._zoom = zoom;\n  }\n\n  get x() {\n    return this._x;\n  }\n\n  get y() {\n    return this._y;\n  }\n\n  get zoom() {\n    return this._zoom;\n  }\n\n  get id() {\n    return [this.x, this.y, this.zoom].join('|');\n  }\n}\n","// Based on https://wiki.openstreetmap.org/wiki/Slippy_map_tilenames#ECMAScript_.28JavaScript.2FActionScript.2C_etc..29\nexport default class TileConversion {\n  static lon2tile(lon, zoom, rounded = true) {\n    const tile = (lon + 180) / 360 * Math.pow(2, zoom);\n\n    return rounded\n      ? Math.floor(tile)\n      : tile;\n  }\n\n  static lat2tile(lat, zoom, rounded = true) {\n    const tile = (1 - Math.log(Math.tan(lat * Math.PI / 180) + 1 / Math.cos(lat * Math.PI / 180))\n      / Math.PI) / 2 * Math.pow(2, zoom);\n\n    return rounded\n      ? Math.floor(tile)\n      : tile;\n  }\n\n  static tile2lon(x, z) {\n    return x / Math.pow(2, z) * 360 - 180;\n  }\n\n  static tile2lat(y, z) {\n    const n = Math.PI - 2 * Math.PI * y / Math.pow(2, z);\n\n    return 180 / Math.PI * Math.atan(0.5 * (Math.exp(n) - Math.exp(-n)));\n  }\n\n  static tile2boundingBox(x, y, zoom) {\n    return {\n      ne: [\n        TileConversion.tile2lat(y, zoom),\n        TileConversion.tile2lon(x + 1, zoom)\n      ],\n\n      sw: [\n        TileConversion.tile2lat(y + 1, zoom),\n        TileConversion.tile2lon(x, zoom)\n      ]\n    };\n  }\n\n  static pixelToLatLon(pixel, center, zoom, mapDimensions, tileSize) {\n    const pointDiff = [\n      pixel[0] / tileSize,\n      pixel[1] / tileSize\n    ];\n\n    const tileX = TileConversion.lon2tile(center[1], zoom, false) - pointDiff[0];\n    const tileY = TileConversion.lat2tile(center[0], zoom, false) - pointDiff[1];\n\n    return [\n      TileConversion.tile2lat(tileY, zoom),\n      TileConversion.tile2lon(tileX, zoom)\n    ];\n  }\n}\n","const defaultOptions = {\n  /**\n   * Common options\n   */\n  source: (x, y, z) => `https://maps.geocod.io/tiles/base/${z}/${x}/${y}.png`,\n  zoom: 12,\n  center: [38.841779, -77.088312],\n\n  /**\n   * Width and height in pixels for each tile, you most likely do not want to change this.\n   */\n  tileSize: 256,\n\n  /**\n   * Determines the distance travelled when panning the map, the higher the value the further the\n   * distance\n   */\n  panAccelerationMultiplier: 3,\n\n  /**\n   * Determines how many additional tiles that should be loaded, to decrease map load times when\n   * panning the map around\n\n   * Minimum value: 1.25\n   */\n  tileAreaMultiplier: 2,\n  tileZoomMultiplier: 4,\n\n  /**\n   * When debug mode is enabled, additional rendering artifacts are drawn. Should only be used in\n   * conjuction with development of the library\n   */\n  debug: false\n};\n\nexport default defaultOptions;\n","import Lightning from './Lightning';\n\nfunction init(canvas, options = {}) {\n  return new Lightning(canvas, options);\n}\n\nexport default init;\n"],"sourceRoot":""}