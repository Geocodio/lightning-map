{"version":3,"sources":["webpack://lightningmaps/webpack/universalModuleDefinition","webpack://lightningmaps/webpack/bootstrap","webpack://lightningmaps/./src/Lightning.js","webpack://lightningmaps/./src/Tile.js","webpack://lightningmaps/./src/TileConversion.js","webpack://lightningmaps/./src/index.js"],"names":["DEBOUNCE_INTERVAL_MS","Lightning","canvas","getContext","Error","draw","bind","context","canvasDimensions","width","height","tiles","tileSize","deltaPosition","tempDeltaPosition","debug","dragStartPosition","attachEvents","applyStyles","window","requestAnimationFrame","zoom","coord","center","source","lastEventActionTime","now","Date","getTime","addEventListener","event","isReadyForEvent","deltaY","setZoom","preventDefault","clientX","clientY","latLon","pixelToLatLon","x","y","style","cursor","horizontalTiles","Math","ceil","verticalTiles","getHorizontalTiles","getVerticalTiles","centerY","lat2tile","centerX","lon2tile","centerYRounded","floor","centerXRounded","relativeTileOffset","abs","startX","startY","grid","tileX","tileY","calculateGrid","fillStyle","fillRect","strokeStyle","horizontalOverflow","verticalOverflow","tile","id","Image","src","drawImage","err","strokeRect","Tile","_x","_y","_zoom","join","TileConversion","lon","rounded","pow","lat","log","tan","PI","cos","z","n","atan","exp","ne","tile2lat","tile2lon","sw","pixel","mapDimensions","pointDiff"],"mappings":"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","file":"lightningmaps.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"lightningmaps\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"lightningmaps\"] = factory();\n\telse\n\t\troot[\"lightningmaps\"] = factory();\n})(window, function() {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./src/index.js\");\n","import TileConversion from './TileConversion';\nimport Tile from './Tile';\n\nconst DEBOUNCE_INTERVAL_MS = 50;\n\nexport default class Lightning {\n  constructor(canvas) {\n    if (!canvas || !canvas.getContext) {\n      throw new Error('Could not get canvas context');\n    }\n\n    this.draw = this.draw.bind(this);\n\n    this.canvas = canvas;\n    this.context = this.canvas.getContext('2d');\n    this.canvasDimensions = [canvas.width, canvas.height];\n    this.tiles = {};\n    this.tileSize = 256;\n    this.deltaPosition = [0, 0];\n    this.tempDeltaPosition = [0, 0];\n\n    this.debug = false;\n    this.dragStartPosition = null;\n\n    this.attachEvents();\n    this.applyStyles();\n\n    window.requestAnimationFrame(this.draw);\n  }\n\n  setZoom(zoom) {\n    if (zoom >= 1 && zoom <= 18) {\n      this.zoom = zoom;\n    }\n\n    return this;\n  }\n\n  setCenter(coord) {\n    this.center = coord;\n    return this;\n  }\n\n  setSource(source) {\n    this.source = source;\n    return this;\n  }\n\n  isReadyForEvent() {\n    if (!this.lastEventActionTime) {\n      return true;\n    }\n\n    const now = new Date().getTime();\n\n    return now - this.lastEventActionTime > DEBOUNCE_INTERVAL_MS;\n  }\n\n  attachEvents() {\n    this.canvas.addEventListener('wheel', event => {\n      if (this.isReadyForEvent()) {\n        if (event.deltaY > 5) {\n          this.lastEventActionTime = new Date().getTime();\n          this.setZoom(this.zoom - 2);\n        } else if (event.deltaY < -5) {\n          this.lastEventActionTime = new Date().getTime();\n          this.setZoom(this.zoom + 2);\n        }\n      }\n\n      event.preventDefault();\n    });\n\n    this.canvas.addEventListener('mousedown', event => {\n      this.dragStartPosition = [event.clientX, event.clientY];\n    });\n\n    this.canvas.addEventListener('mouseup', event => {\n      const latLon = TileConversion.pixelToLatLon(\n        this.tempDeltaPosition,\n        this.center,\n        this.zoom,\n        this.canvasDimensions,\n        this.tileSize\n      );\n\n      this.tempDeltaPosition = [0, 0];\n      this.center = latLon;\n\n      this.dragStartPosition = null;\n    });\n\n    this.canvas.addEventListener('mousemove', event => {\n      if (this.dragStartPosition) {\n        this.lastEventActionTime = new Date().getTime();\n        const x = this.dragStartPosition[0] - event.clientX;\n        const y = this.dragStartPosition[1] - event.clientY;\n\n        this.tempDeltaPosition = [-x, -y];\n      }\n\n      return false;\n    });\n  }\n\n  applyStyles() {\n    this.canvas.style.cursor = 'grab';\n  }\n\n  getHorizontalTiles() {\n    let horizontalTiles = Math.ceil(this.canvasDimensions[0] / this.tileSize) * 2;\n\n    if (horizontalTiles % 2 === 0) {\n      horizontalTiles++;\n    }\n\n    return horizontalTiles;\n  }\n\n  getVerticalTiles() {\n    let verticalTiles = Math.ceil(this.canvasDimensions[1] / this.tileSize) * 2;\n\n    if (verticalTiles % 2 === 0) {\n      verticalTiles++;\n    }\n\n    return verticalTiles;\n  }\n\n  calculateGrid() {\n    const horizontalTiles = this.getHorizontalTiles();\n    const verticalTiles = this.getVerticalTiles();\n\n    const centerY = TileConversion.lat2tile(this.center[0], this.zoom, false);\n    const centerX = TileConversion.lon2tile(this.center[1], this.zoom, false);\n\n    const centerYRounded = Math.floor(centerY);\n    const centerXRounded = Math.floor(centerX);\n\n    const relativeTileOffset = [\n      Math.abs(centerX - centerXRounded),\n      Math.abs(centerY - centerYRounded)\n    ];\n\n    this.deltaPosition = [\n      this.tileSize / 2 - (relativeTileOffset[0] * this.tileSize),\n      this.tileSize / 2 - (relativeTileOffset[1] * this.tileSize)\n    ];\n\n    const startX = centerXRounded - Math.floor(horizontalTiles / 2);\n    const startY = centerYRounded - Math.floor(verticalTiles / 2);\n\n    let grid = [];\n\n    for (let y = 0; y < verticalTiles; y++) {\n      for (let x = 0; x < horizontalTiles; x++) {\n        if (!grid[x]) {\n          grid[x] = [];\n        }\n\n        const tileX = startX + x;\n        const tileY = startY + y;\n\n        if (tileX >= 0 && tileY >= 0) {\n          grid[x][y] = new Tile(tileX, tileY, this.zoom);\n        }\n      }\n    }\n\n    this.grid = grid;\n  }\n\n  draw() {\n    this.calculateGrid();\n\n    this.context.fillStyle = '#C5DFF6';\n    this.context.fillRect(0, 0, this.canvasDimensions[0], this.canvasDimensions[1]);\n    this.context.strokeStyle = 'green';\n\n\n    const horizontalTiles = this.getHorizontalTiles();\n    const verticalTiles = this.getVerticalTiles();\n\n    const horizontalOverflow = (horizontalTiles * this.tileSize) - this.canvasDimensions[0];\n    const verticalOverflow = (verticalTiles * this.tileSize) - this.canvasDimensions[1];\n\n    for (let y = 0; y < verticalTiles; y++) {\n      for (let x = 0; x < horizontalTiles; x++) {\n        const tile = this.grid[x][y];\n\n        if (tile) {\n          if (!(tile.id in this.tiles)) {\n            this.tiles[tile.id] = new Image();\n            this.tiles[tile.id].src = this.source(Math.floor(tile.x), Math.floor(tile.y), tile.zoom);\n          }\n\n          const tileX = this.tempDeltaPosition[0] + this.deltaPosition[0] + (x * this.tileSize - horizontalOverflow / 2);\n          const tileY = this.tempDeltaPosition[1] + this.deltaPosition[1] + (y * this.tileSize - verticalOverflow / 2)\n\n          try {\n            this.context.drawImage(this.tiles[tile.id], tileX, tileY, this.tileSize, this.tileSize);\n          } catch (err) {\n            // Do nothing for now\n          }\n\n          if (this.debug) {\n            this.context.strokeRect(tileX, tileY, this.tileSize, this.tileSize);\n          }\n        }\n      }\n    }\n\n    /*\n    this.context.fillStyle = 'rgba(200, 0, 0, 0.7)';\n    this.context.beginPath();\n    this.context.arc(this.canvasDimensions[0] / 2, this.canvasDimensions[1] / 2, 10, 0, 2 * Math.PI);\n    this.context.fill();\n    */\n\n    window.requestAnimationFrame(this.draw);\n  }\n\n}\n","export default class Tile {\n  constructor(x, y, zoom) {\n    this._x = x;\n    this._y = y;\n    this._zoom = zoom;\n  }\n\n  get x() {\n    return this._x;\n  }\n\n  get y() {\n    return this._y;\n  }\n\n  get zoom() {\n    return this._zoom;\n  }\n\n  get id() {\n    return [this.x, this.y, this.zoom].join('|');\n  }\n}\n","// Based on https://wiki.openstreetmap.org/wiki/Slippy_map_tilenames#ECMAScript_.28JavaScript.2FActionScript.2C_etc..29\nexport default class TileConversion {\n  static lon2tile(lon, zoom, rounded = true) {\n    const tile = (lon + 180) / 360 * Math.pow(2, zoom);\n\n    return rounded\n      ? Math.floor(tile)\n      : tile;\n  }\n\n  static lat2tile(lat, zoom, rounded = true) {\n    const tile = (1 - Math.log(Math.tan(lat * Math.PI / 180) + 1 / Math.cos(lat * Math.PI / 180))\n      / Math.PI) / 2 * Math.pow(2, zoom);\n\n    return rounded\n      ? Math.floor(tile)\n      : tile;\n  }\n\n  static tile2lon(x, z) {\n    return x / Math.pow(2, z) * 360 - 180;\n  }\n\n  static tile2lat(y, z) {\n    const n = Math.PI - 2 * Math.PI * y / Math.pow(2, z);\n\n    return 180 / Math.PI * Math.atan(0.5 * (Math.exp(n) - Math.exp(-n)));\n  }\n\n  static tile2boundingBox(x, y, zoom) {\n    return {\n      ne: [\n        TileConversion.tile2lat(y, zoom),\n        TileConversion.tile2lon(x + 1, zoom)\n      ],\n\n      sw: [\n        TileConversion.tile2lat(y + 1, zoom),\n        TileConversion.tile2lon(x, zoom)\n      ]\n    };\n  }\n\n  static pixelToLatLon(pixel, center, zoom, mapDimensions, tileSize) {\n    const pointDiff = [\n      pixel[0] / tileSize,\n      pixel[1] / tileSize\n    ];\n\n    const tileX = TileConversion.lon2tile(center[1], zoom, false) - pointDiff[0];\n    const tileY = TileConversion.lat2tile(center[0], zoom, false) - pointDiff[1];\n\n    return [\n      TileConversion.tile2lat(tileY, zoom),\n      TileConversion.tile2lon(tileX, zoom)\n    ];\n  }\n}\n","import Lightning from './Lightning';\nexport { Lightning };\n"],"sourceRoot":""}