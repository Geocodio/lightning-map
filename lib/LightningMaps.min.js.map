{"version":3,"sources":["webpack://LightningMaps/webpack/universalModuleDefinition","webpack://LightningMaps/webpack/bootstrap","webpack://LightningMaps/./src/TileConversion.js","webpack://LightningMaps/./src/defaultOptions.js","webpack://LightningMaps/./src/index.js","webpack://LightningMaps/./src/Map.js","webpack://LightningMaps/./src/TileLayer.js","webpack://LightningMaps/./src/Tile.js","webpack://LightningMaps/./src/Marker.js"],"names":["root","factory","exports","module","define","amd","window","installedModules","__webpack_require__","moduleId","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","TileConversion","lon","zoom","rounded","arguments","length","undefined","tile","Math","pow","floor","lat","log","tan","PI","cos","x","z","y","atan","exp","ne","tile2lat","tile2lon","sw","pixel","center","tileSize","pointDiff","tileX","lon2tile","tileY","lat2tile","coord","mapDimensions","source","concat","attribution","panAccelerationMultiplier","maxPanAcceleration","throwTimingThresholdMs","throwVelocityThreshold","animationDurationMs","debounceIntervalMs","tileAreaMultiplier","debug","color","type","_Map","_interopRequireDefault","_Marker","Map","default","Marker","_TileConversion","_TileLayer","_defaultOptions","canvas","options","_classCallCheck","this","getContext","Error","context","assign","defaultMapOptions","initializeState","attachEvents","applyStyles","lastDrawState","draw","requestAnimationFrame","state","canvasDimensions","width","height","tiles","moveOffset","targetMoveOffset","targetMoveOffsetIsCoord","moveAnimationStart","dragStartPosition","lastEventActionTime","startZoom","targetZoom","zoomAnimationStart","scale","lastMouseMoveEvent","mouseVelocities","markers","tileLayers","zoomValueIsValid","push","performance","now","Array","isArray","map","parseFloat","pixelToLatLon","position1","position2","time1","time2","_this","addEventListener","event","preventDefault","isReadyForEvent","deltaY","setZoom","centerX","centerY","setTargetMoveOffset","clientX","clientY","timingThreshold","thresholdsToConsider","filter","threshold","averageVelocity","reduce","accumulator","velocity","multiplier","min","updateCenter","vx","calculateVelocity","vy","round","sqrt","style","cursor","time","timestamp","progress","max","percentage","easeOutQuad","latLonToPixel","latLon","differenceFromTarget","abs","newZoomDiff","remainingTime","roundedZoom","diff","shift","tilesZoomLevel","_this2","allTiles","values","maxTilesToKeep","tileExpirationCutOff","Date","getTime","tilesToConsider","lastRequested","sort","a","b","tilesToDeleteCount","splice","forEach","src","tileId","drawState","JSON","stringify","updateMoveOffset","updateZoom","tileLayer","calculateGrid","garbageCollect","shouldRedraw","drawTiles","drawMarkers","drawAttribution","nw","se","_this3","bounds","getMapBounds","visibleMarkers","marker","coords","position","render","font","textBounds","measureText","fillStyle","roundedRectangle","fillText","beginPath","moveTo","lineTo","quadraticCurveTo","closePath","fill","_this4","addMarker","_Tile","TileLayer","shouldBeDeleted","grid","gridHash","relativeTileOffset","loadedPercentage","canvasSize","tilesCount","ceil","_this$map","join","horizontalTiles","getTilesCount","verticalTiles","centerYRounded","centerXRounded","startX","startY","ensureTileAsset","id","tileUrl","Image","loaded","onload","canvasWidth","canvasHeight","centerOffset","fillRect","horizontalOverflow","verticalOverflow","drawImage","drawGenericBackground","err","strokeStyle","strokeRect","arc","size","increment","lineX","lineY","stroke","totalTiles","loadedTiles","Tile","_x","_y","_zoom","_coords","_options","defaultMarkerOptions","renderFunction","renderMarker","renderCircle","renderDonut","save","restore","lineWidth","markerWidth","transform","bezierCurveTo"],"mappings":"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","file":"LightningMaps.min.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"LightningMaps\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"LightningMaps\"] = factory();\n\telse\n\t\troot[\"LightningMaps\"] = factory();\n})(window, function() {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 2);\n","// Based on https://wiki.openstreetmap.org/wiki/Slippy_map_tilenames#ECMAScript_.28JavaScript.2FActionScript.2C_etc..29\nexport default class TileConversion {\n  static lon2tile(lon, zoom, rounded = true) {\n    const tile = (lon + 180) / 360 * Math.pow(2, zoom);\n\n    return rounded\n      ? Math.floor(tile)\n      : tile;\n  }\n\n  static lat2tile(lat, zoom, rounded = true) {\n    const tile = (1 - Math.log(Math.tan(lat * Math.PI / 180) + 1 / Math.cos(lat * Math.PI / 180))\n      / Math.PI) / 2 * Math.pow(2, zoom);\n\n    return rounded\n      ? Math.floor(tile)\n      : tile;\n  }\n\n  static tile2lon(x, z) {\n    return x / Math.pow(2, z) * 360 - 180;\n  }\n\n  static tile2lat(y, z) {\n    const n = Math.PI - 2 * Math.PI * y / Math.pow(2, z);\n\n    return 180 / Math.PI * Math.atan(0.5 * (Math.exp(n) - Math.exp(-n)));\n  }\n\n  static tile2boundingBox(x, y, zoom) {\n    return {\n      ne: [\n        TileConversion.tile2lat(y, zoom),\n        TileConversion.tile2lon(x + 1, zoom)\n      ],\n\n      sw: [\n        TileConversion.tile2lat(y + 1, zoom),\n        TileConversion.tile2lon(x, zoom)\n      ]\n    };\n  }\n\n  static pixelToLatLon(pixel, center, zoom, tileSize) {\n    const pointDiff = [\n      pixel[0] / tileSize,\n      pixel[1] / tileSize\n    ];\n\n    const tileX = TileConversion.lon2tile(center[1], zoom, false) - pointDiff[0];\n    const tileY = TileConversion.lat2tile(center[0], zoom, false) - pointDiff[1];\n\n    return [\n      TileConversion.tile2lat(tileY, zoom),\n      TileConversion.tile2lon(tileX, zoom)\n    ];\n  }\n\n  static latLonToPixel(coord, center, zoom, tileSize, mapDimensions) {\n    const tileX = TileConversion.lon2tile(coord[1], zoom, false);\n    const tileY = TileConversion.lat2tile(coord[0], zoom, false);\n\n    const tileCenterX = TileConversion.lon2tile(center[1], zoom, false);\n    const tileCenterY = TileConversion.lat2tile(center[0], zoom, false);\n\n    return [\n      -(tileX - tileCenterX) * tileSize,\n      -(tileY - tileCenterY) * tileSize\n    ];\n  }\n}\n","export const defaultMapOptions = {\n  /**\n   * Common options\n   */\n  source: (x, y, z) => `https://maps.geocod.io/tiles/base/${z}/${x}/${y}.png`,\n  zoom: 12,\n  center: [38.841779, -77.088312],\n  attribution: '© OpenStreetMap contributors',\n\n  /**\n   * Width and height in pixels for each tile, you most likely do not want to change this.\n   */\n  tileSize: 256,\n\n  /**\n   * Determines the distance travelled when panning the map, the higher the value the further the\n   * distance\n   */\n  panAccelerationMultiplier: 2,\n\n  /**\n   * The maximum acceleration constant for when the map is thrown. This is in place to avoid\n   * super-sonic acceleration speeds :)\n   */\n  maxPanAcceleration: 3.5,\n\n  /**\n   * Only consider high velocity mouse movements that has been performed within this timing\n   * threshold (in milliseconds)\n   */\n  throwTimingThresholdMs: 100,\n\n  /**\n   * If the mouse panning velocity is above this threshold, it is considering a throw rather than\n   * a regular pan. We use this to pan further when the mouse is moved quickly\n   */\n  throwVelocityThreshold: 3000,\n\n  /**\n   * How quickly panning and zooming animations are executed (in milliseconds)\n   */\n  animationDurationMs: 300,\n\n  /*\n   * Used for debouncing events such as scrolling\n   */\n  debounceIntervalMs: 200,\n\n  /**\n   * Determines how many additional tiles that should be loaded, to decrease map load times when\n   * panning the map around\n\n   * Minimum value: 1.25\n   */\n  tileAreaMultiplier: 2,\n\n  /**\n   * When debug mode is enabled, additional rendering artifacts are drawn. Should only be used in\n   * conjuction with development of the library\n   */\n  debug: false\n};\n\nexport const defaultMarkerOptions = {\n  /**\n   * What color should the marker be?\n   * Supports hex, rgb and rgba values\n   */\n  color: 'rgba(0, 0, 200, 0.7)',\n\n  /**\n   * Valid values: marker, circle, donut\n   */\n  type: 'marker'\n};\n","import Map from './Map';\nimport Marker from './Marker';\n\nexport default {\n  Map,\n  Marker\n};\n","import TileConversion from './TileConversion';\nimport TileLayer from './TileLayer';\nimport { defaultMapOptions } from './defaultOptions';\n\nexport default class Map {\n\n  constructor(canvas, options) {\n    if (!canvas || !canvas.getContext) {\n      throw new Error('Could not get canvas context');\n    }\n\n    this.canvas = canvas;\n    this.context = this.canvas.getContext('2d');\n\n    this.options = Object.assign({}, defaultMapOptions, options);\n\n    this.initializeState();\n    this.attachEvents();\n    this.applyStyles();\n\n    this.lastDrawState = null;\n\n    this.draw = this.draw.bind(this);\n    window.requestAnimationFrame(this.draw);\n  }\n\n  initializeState() {\n    this.state = {\n      canvasDimensions: [this.canvas.width, this.canvas.height],\n      tiles: {},\n      moveOffset: [0, 0],\n      targetMoveOffset: [0, 0],\n      targetMoveOffsetIsCoord: false,\n      moveAnimationStart: null,\n      dragStartPosition: null,\n      lastEventActionTime: null,\n      startZoom: this.options.zoom,\n      targetZoom: this.options.zoom,\n      zoomAnimationStart: null,\n      scale: 1,\n      lastMouseMoveEvent: null,\n      mouseVelocities: [],\n      markers: [],\n      tileLayers: [\n        new TileLayer(this)\n      ]\n    };\n  }\n\n  getZoom() {\n    return this.options.zoom;\n  }\n\n  setZoom(zoom) {\n    if (this.zoomValueIsValid(zoom)) {\n      this.state.tileLayers.push(new TileLayer(this, zoom));\n      // this.state.tileLayers[0].tilesZoomLevel = this.options.zoom;\n\n      this.state.lastEventActionTime = window.performance.now();\n      this.state.zoomAnimationStart = window.performance.now();\n      this.state.targetZoom = zoom;\n      this.state.startZoom = this.options.zoom;\n    }\n  }\n\n  setCenter(coord) {\n    if (!Array.isArray(coord) || coord.length !== 2) {\n      throw new Error('Please provide a valid array with a lat/lon');\n    }\n\n    coord = coord.map(coord => parseFloat(coord));\n\n    this.state.moveAnimationStart = window.performance.now();\n    this.state.targetMoveOffset = coord;\n    this.state.targetMoveOffsetIsCoord = true;\n  }\n\n  setTargetMoveOffset(x, y, animated = true) {\n    if (animated) {\n      this.state.moveAnimationStart = window.performance.now();\n\n      this.state.targetMoveOffset = TileConversion.pixelToLatLon(\n        [x, y],\n        this.options.center,\n        this.options.zoom,\n        this.options.tileSize\n      );\n\n      this.state.targetMoveOffsetIsCoord = true;\n    } else {\n      this.state.targetMoveOffset = [x, y];\n      this.state.targetMoveOffsetIsCoord = false;\n\n      this.state.moveOffset = this.state.targetMoveOffset;\n    }\n  }\n\n  zoomValueIsValid(zoom) {\n    return zoom >= 1 && zoom <= 18;\n  }\n\n  isReadyForEvent() {\n    if (!this.state.lastEventActionTime) {\n      return true;\n    }\n\n    const now = window.performance.now();\n    const milliSecondsSinceLastEvent = now - this.state.lastEventActionTime;\n\n    return milliSecondsSinceLastEvent > this.options.debounceIntervalMs;\n  }\n\n  calculateVelocity(position1, position2, time1, time2) {\n    return ((position1 - position2) / (time1 - time2)) * 1000;\n  }\n\n  attachEvents() {\n    this.canvas.addEventListener('wheel', event => {\n      event.preventDefault();\n\n      if (this.isReadyForEvent()) {\n        if (event.deltaY > 5) {\n          this.setZoom(this.options.zoom - 1);\n        } else if (event.deltaY < -5) {\n          this.setZoom(this.options.zoom + 1);\n        }\n      }\n    });\n\n    this.canvas.addEventListener('dblclick', event => {\n      event.preventDefault();\n\n      const centerX = this.state.canvasDimensions[0] / 2;\n      const centerY = this.state.canvasDimensions[1] / 2;\n\n      this.setTargetMoveOffset(\n        -(event.clientX - centerX),\n        -(event.clientY - centerY)\n      );\n\n      this.setZoom(this.options.zoom + 1);\n    });\n\n    this.canvas.addEventListener('mousedown', event => {\n      event.preventDefault();\n\n      this.state.mouseVelocities = [];\n\n      this.state.dragStartPosition = [\n        event.clientX - this.state.moveOffset[0],\n        event.clientY - this.state.moveOffset[1]\n      ];\n    });\n\n    this.canvas.addEventListener('mouseup', event => {\n      event.preventDefault();\n\n      const x = -(this.state.dragStartPosition[0] - event.clientX);\n      const y = -(this.state.dragStartPosition[1] - event.clientY);\n\n      if (this.state.moveOffset[0] !== 0 || this.state.moveOffset[1] !== 0) {\n        const now = window.performance.now();\n        const timingThreshold = now - this.options.throwTimingThresholdMs;\n\n        const thresholdsToConsider = this.state.mouseVelocities\n          .filter(threshold => threshold[0] > timingThreshold)\n          .map(threshold => threshold[1]);\n\n        const velocitySum = thresholdsToConsider.reduce(\n          (accumulator, velocity) => accumulator + velocity,\n          0\n        );\n\n        const averageVelocity = velocitySum / thresholdsToConsider.length;\n\n        if (averageVelocity >= this.options.throwVelocityThreshold) {\n          let multiplier = averageVelocity / this.options.throwVelocityThreshold\n            * this.options.panAccelerationMultiplier;\n\n          multiplier = Math.min(multiplier, this.options.maxPanAcceleration);\n\n          this.setTargetMoveOffset(\n            x * multiplier,\n            y * multiplier\n          );\n        } else {\n          this.updateCenter();\n        }\n      }\n\n      this.state.dragStartPosition = null;\n    });\n\n    this.canvas.addEventListener('mousemove', event => {\n      event.preventDefault();\n\n      if (this.state.dragStartPosition) {\n        const x = -(this.state.dragStartPosition[0] - event.clientX);\n        const y = -(this.state.dragStartPosition[1] - event.clientY);\n\n        const now = window.performance.now();\n\n        const vx = this.calculateVelocity(this.state.moveOffset[0], x, now, this.state.lastMouseMoveEvent);\n        const vy = this.calculateVelocity(this.state.moveOffset[1], y, now, this.state.lastMouseMoveEvent);\n\n        const velocity = Math.round(Math.sqrt((vx * vx) + (vy * vy)));\n\n        this.state.mouseVelocities.push([now, velocity]);\n\n        this.setTargetMoveOffset(x, y, false);\n        this.state.lastMouseMoveEvent = window.performance.now();\n      }\n\n      return false;\n    });\n  }\n\n  applyStyles() {\n    this.canvas.style.cursor = 'grab';\n  }\n\n  easeOutQuad(time) {\n    return time * (2 - time);\n  }\n\n  updateMoveOffset() {\n    const targetMoveOffsetChanged = this.state.moveOffset !== this.state.targetMoveOffset;\n\n    if (targetMoveOffsetChanged) {\n      const timestamp = window.performance.now();\n\n      const progress = Math.max(timestamp - this.state.moveAnimationStart, 0);\n      const percentage = this.easeOutQuad(progress / this.options.animationDurationMs);\n\n      let targetMoveOffset = this.state.targetMoveOffset;\n\n      if (this.state.targetMoveOffsetIsCoord) {\n        targetMoveOffset = TileConversion.latLonToPixel(\n          this.state.targetMoveOffset,\n          this.options.center,\n          this.options.zoom,\n          this.options.tileSize,\n          this.state.canvasDimensions\n        );\n      }\n\n      if (percentage >= 0.99) {\n        this.state.moveOffset = targetMoveOffset;\n      } else {\n        this.state.moveOffset = [\n          this.state.moveOffset[0] + (targetMoveOffset[0] - this.state.moveOffset[0]) * percentage,\n          this.state.moveOffset[1] + (targetMoveOffset[1] - this.state.moveOffset[1]) * percentage\n        ];\n      }\n\n      const targetHasBeenReached = this.state.moveOffset === targetMoveOffset;\n\n      if (targetHasBeenReached) {\n        this.updateCenter();\n      }\n    }\n  }\n\n  updateCenter() {\n    const latLon = TileConversion.pixelToLatLon(\n      this.state.moveOffset,\n      this.options.center,\n      this.options.zoom,\n      this.options.tileSize\n    );\n\n    this.setTargetMoveOffset(0, 0, false);\n    this.options.center = latLon;\n  }\n\n  updateZoom() {\n    if (this.options.zoom !== this.state.targetZoom) {\n      const progress = Math.max(window.performance.now() - this.state.zoomAnimationStart, 0);\n      const percentage = this.easeOutQuad(progress / this.options.animationDurationMs);\n\n      let differenceFromTarget = Math.abs(this.state.targetZoom - this.state.startZoom);\n\n      if (this.state.targetZoom <= this.state.startZoom) {\n        differenceFromTarget *= -1;\n      }\n\n      const newZoomDiff = differenceFromTarget * percentage;\n      const remainingTime = this.options.animationDurationMs - progress;\n\n      this.options.zoom = remainingTime <= 5\n        ? this.state.targetZoom\n        : (this.state.startZoom + newZoomDiff);\n\n      const roundedZoom = Math.round(this.options.zoom);\n      const diff = this.options.zoom - roundedZoom;\n\n      this.state.scale = Math.pow(2, diff);\n\n      if (this.options.zoom === this.state.targetZoom) {\n        // Mark old tile layer for deletion\n        this.state.tileLayers.shift();\n        this.state.tileLayers[0].tilesZoomLevel = null;\n\n        // this.state.tileLayers[this.state.tileLayers.length - 1].shouldBeDeleted = true;\n      }\n    } else {\n      this.state.scale = 1;\n    }\n  }\n\n  garbageCollect() {\n    const allTiles = Object.values(this.state.tiles);\n\n    if (allTiles.length > this.maxTilesToKeep()) {\n      const tileExpirationCutOff = new Date().getTime() - 5000;\n\n      const tilesToConsider = allTiles\n        .filter(tile => tile.lastRequested < tileExpirationCutOff)\n        .sort((a, b) => ~~(a.lastRequested < b.lastRequested));\n\n      const tilesToDeleteCount = this.maxTilesToKeep() - (allTiles.length - tilesToConsider.length);\n\n      tilesToConsider\n        .splice(tilesToConsider.length - tilesToDeleteCount)\n        .forEach(tile => {\n          tile.src = '';\n          delete this.state.tiles[tile.tileId];\n        });\n    }\n  }\n\n  maxTilesToKeep() {\n    return 1000;\n  }\n\n  shouldRedraw() {\n    const drawState = JSON.stringify([this.state, this.options]);\n\n    if (this.lastDrawState !== drawState) {\n      this.lastDrawState = drawState;\n\n      return true;\n    }\n\n    return false;\n  }\n\n  draw() {\n    this.updateMoveOffset();\n    this.updateZoom();\n    this.state.tileLayers.forEach(tileLayer => tileLayer.calculateGrid());\n    this.garbageCollect();\n\n    if (this.shouldRedraw()) {\n      // Delete tile layers that are ready for deletion and mostly loaded\n      /*\n      this.state.tileLayers = this.state.tileLayers\n        .filter(tileLayer => !(tileLayer.shouldBeDeleted && tileLayer.loadedPercentage() >= 0.9));\n\n      console.log(this.state.tileLayers.length);\n      */\n\n      if (this.state.tileLayers.length > 0) {\n        // Only draw the top layer\n        this.state.tileLayers[0].drawTiles(this.state.scale);\n      }\n\n      this.drawMarkers();\n      this.drawAttribution();\n    }\n\n    window.requestAnimationFrame(this.draw);\n  }\n\n  getMapBounds() {\n    const nw = TileConversion.pixelToLatLon(\n      [this.state.canvasDimensions[0] / 2, (this.state.canvasDimensions[1] / 2)],\n      this.options.center,\n      this.options.zoom,\n      this.options.tileSize\n    );\n\n    const se = TileConversion.pixelToLatLon(\n      [-this.state.canvasDimensions[0] / 2, -(this.state.canvasDimensions[1] / 2)],\n      this.options.center,\n      this.options.zoom,\n      this.options.tileSize\n    );\n\n    return {\n      nw, se\n    };\n  }\n\n  drawMarkers() {\n    const bounds = this.getMapBounds();\n\n    const visibleMarkers = this.state.markers.filter(marker => {\n      return marker.coords[0] <= bounds.nw[0] && marker.coords[0] >= bounds.se[0]\n        && marker.coords[1] >= bounds.nw[1] && marker.coords[1] <= bounds.se[1];\n    });\n\n    const center = [\n      this.state.canvasDimensions[0] / 2,\n      this.state.canvasDimensions[1] / 2\n    ];\n\n    visibleMarkers.map(marker => {\n      const position = TileConversion.latLonToPixel(\n        marker.coords,\n        this.options.center,\n        this.options.zoom,\n        this.options.tileSize,\n        this.state.canvasDimensions\n      );\n\n      marker.render(this.context, [\n        center[0] - position[0] + this.state.moveOffset[0],\n        center[1] - position[1] + this.state.moveOffset[1]\n      ]);\n    });\n  }\n\n  drawAttribution() {\n    const margin = 4;\n\n    this.context.font = 'bold 12px sans-serif';\n    const textBounds = this.context.measureText(this.options.attribution);\n\n    const x = this.state.canvasDimensions[0] - textBounds.width - margin;\n    const y = this.state.canvasDimensions[1] - 2 - margin;\n\n    this.context.fillStyle = 'rgba(255, 255, 255, 0.7)';\n    this.roundedRectangle(x - margin, y - 15, textBounds.width + 80, 80);\n\n    this.context.fillStyle = 'rgba(0, 0, 0, 0.7)';\n    this.context.fillText(this.options.attribution, x, y);\n\n  }\n\n  roundedRectangle(x, y, width, height) {\n    const radius = 5;\n\n    this.context.beginPath();\n    this.context.moveTo(x + radius, y);\n    this.context.lineTo(x + width - radius, y);\n    this.context.quadraticCurveTo(x + width, y, x + width, y + radius);\n    this.context.lineTo(x + width, y + height - radius);\n    this.context.quadraticCurveTo(x + width, y + height, x + width - radius, y + height);\n    this.context.lineTo(x + radius, y + height);\n    this.context.quadraticCurveTo(x, y + height, x, y + height - radius);\n    this.context.lineTo(x, y + radius);\n    this.context.quadraticCurveTo(x, y, x + radius, y);\n    this.context.closePath();\n\n    this.context.fill();\n  }\n\n  addMarker(marker) {\n    this.state.markers.push(marker);\n  }\n\n  addMarkers(markers) {\n    markers.map(marker => this.addMarker(marker));\n  }\n\n}\n","import TileConversion from './TileConversion';\nimport Tile from './Tile';\n\nexport default class TileLayer {\n\n  constructor(map, tilesZoomLevel = null) {\n    this.map = map;\n    this.tilesZoomLevel = tilesZoomLevel;\n    this.shouldBeDeleted = false;\n\n    this.context = map.context;\n\n    this.state = {\n      grid: [],\n      gridHash: null,\n      relativeTileOffset: [0, 0]\n    };\n  }\n\n  toJSON() {\n    return [\n      this.state,\n      this.loadedPercentage() // We want a change in loaded tiles to possibly trigger a redraw\n    ];\n  }\n\n  getTilesCount(canvasSize) {\n    let tilesCount = Math.ceil(canvasSize / this.map.options.tileSize) * this.map.options.tileAreaMultiplier;\n\n    if (tilesCount % 2 === 0) {\n      tilesCount++;\n    }\n\n    return tilesCount;\n  }\n\n  calculateGrid() {\n    const { state, options } = this.map;\n\n    const centerY = TileConversion.lat2tile(options.center[0], Math.round(this.tilesZoomLevel || options.zoom), false);\n    const centerX = TileConversion.lon2tile(options.center[1], Math.round(this.tilesZoomLevel || options.zoom), false);\n    const gridHash = [centerY, centerX].join(',');\n\n    const gridNeedsToBeUpdated = this.state.gridHash !== gridHash;\n\n    if (!gridNeedsToBeUpdated) {\n      return;\n    }\n\n    const horizontalTiles = this.getTilesCount(state.canvasDimensions[0]);\n    const verticalTiles = this.getTilesCount(state.canvasDimensions[1]);\n\n    // noinspection JSSuspiciousNameCombination\n    const centerYRounded = Math.floor(centerY);\n    const centerXRounded = Math.floor(centerX);\n\n    this.state.relativeTileOffset = [\n      Math.abs(centerX - centerXRounded),\n      Math.abs(centerY - centerYRounded)\n    ];\n\n    const startX = centerXRounded - Math.floor(horizontalTiles / 2);\n    const startY = centerYRounded - Math.floor(verticalTiles / 2);\n\n    let grid = [];\n\n    for (let y = 0; y < verticalTiles; y++) {\n      for (let x = 0; x < horizontalTiles; x++) {\n        if (!grid[x]) {\n          grid[x] = [];\n        }\n\n        const tileX = startX + x;\n        const tileY = startY + y;\n\n        if (tileX >= 0 && tileY >= 0) {\n          grid[x][y] = new Tile(tileX, tileY, Math.round(this.tilesZoomLevel || options.zoom));\n          this.ensureTileAsset(grid[x][y]);\n        }\n      }\n    }\n\n    this.state.grid = grid;\n    this.state.gridHash = gridHash;\n  }\n\n  ensureTileAsset(tile) {\n    if (!(tile.id in this.map.state.tiles)) {\n      const tileUrl = this.map.options.source(Math.floor(tile.x), Math.floor(tile.y), tile.zoom);\n\n      this.map.state.tiles[tile.id] = new Image();\n      this.map.state.tiles[tile.id].tileId = tile.id;\n      this.map.state.tiles[tile.id].src = tileUrl;\n      this.map.state.tiles[tile.id].loaded = false;\n      this.map.state.tiles[tile.id].onload = () => {\n        this.map.state.tiles[tile.id].loaded = true;\n      };\n    }\n\n    this.map.state.tiles[tile.id].lastRequested = new Date().getTime();\n  }\n\n  drawTiles(scale) {\n    const canvasWidth = this.map.state.canvasDimensions[0];\n    const canvasHeight = this.map.state.canvasDimensions[1];\n\n    const tileSize = this.map.options.tileSize * scale;\n\n    const centerOffset = [\n      tileSize / 2 - (this.state.relativeTileOffset[0] * tileSize),\n      tileSize / 2 - (this.state.relativeTileOffset[1] * tileSize)\n    ];\n\n    this.context.fillStyle = '#EEE';\n    this.context.fillRect(0, 0, canvasWidth, canvasHeight);\n\n    const horizontalTiles = this.getTilesCount(canvasWidth);\n    const verticalTiles = this.getTilesCount(canvasHeight);\n\n    const horizontalOverflow = (horizontalTiles * tileSize) - canvasWidth;\n    const verticalOverflow = (verticalTiles * tileSize) - canvasHeight;\n\n    for (let y = 0; y < verticalTiles; y++) {\n      for (let x = 0; x < horizontalTiles; x++) {\n        const tile = this.state.grid[x][y];\n\n        if (tile) {\n          const tileX = this.map.state.moveOffset[0] + centerOffset[0]\n            + (x * tileSize - horizontalOverflow / 2);\n\n          const tileY = this.map.state.moveOffset[1] + centerOffset[1]\n            + (y * tileSize - verticalOverflow / 2);\n\n          try {\n            if (this.map.state.tiles[tile.id].loaded) {\n              this.context.drawImage(this.map.state.tiles[tile.id], tileX, tileY, tileSize, tileSize);\n            } else {\n              this.drawGenericBackground(tileX, tileY, tileSize);\n            }\n          } catch (err) {\n            this.drawGenericBackground(tileX, tileY, tileSize);\n          }\n\n          if (this.map.options.debug) {\n            this.context.strokeStyle = 'green';\n            this.context.strokeRect(tileX, tileY, tileSize, tileSize);\n          }\n        }\n      }\n    }\n\n    if (this.map.options.debug) {\n      this.context.fillStyle = 'rgba(200, 0, 0, 0.7)';\n      this.context.beginPath();\n      this.context.arc(canvasWidth / 2, canvasHeight / 2, 5, 0, 2 * Math.PI);\n      this.context.fill();\n    }\n  }\n\n  drawGenericBackground(x, y, size) {\n    const increment = size / 8;\n\n    this.context.beginPath();\n    for (let lineX = increment; lineX < size; lineX += increment) {\n      for (let lineY = increment; lineY < size; lineY += increment) {\n        this.context.moveTo(x, y + lineY);\n        this.context.lineTo(x + size, y + lineY);\n\n        this.context.moveTo(x + lineX, y);\n        this.context.lineTo(x + lineX, y + size);\n      }\n    }\n    this.context.strokeStyle = '#DDD';\n    this.context.stroke();\n\n    this.context.strokeStyle = '#CCC';\n    this.context.strokeRect(x, y, size, size);\n  }\n\n  loadedPercentage() {\n    const horizontalTiles = this.getTilesCount(this.map.state.canvasDimensions[0]);\n    const verticalTiles = this.getTilesCount(this.map.state.canvasDimensions[1]);\n\n    const totalTiles = horizontalTiles * verticalTiles;\n    let loadedTiles = 0;\n\n    for (let y = 0; y < verticalTiles; y++) {\n      for (let x = 0; x < horizontalTiles; x++) {\n        const tile = this.state.grid[x][y];\n\n        if (this.map.state.tiles[tile.id].loaded) {\n          loadedTiles++;\n        }\n      }\n    }\n\n    return loadedTiles / totalTiles;\n  }\n}\n","export default class Tile {\n  constructor(x, y, zoom) {\n    this._x = x;\n    this._y = y;\n    this._zoom = zoom;\n  }\n\n  get x() {\n    return this._x;\n  }\n\n  get y() {\n    return this._y;\n  }\n\n  get zoom() {\n    return this._zoom;\n  }\n\n  get id() {\n    return [this.x, this.y, this.zoom].join('|');\n  }\n}\n","import { defaultMarkerOptions } from './defaultOptions';\n\nexport default class Marker {\n  constructor(coords, options = {}) {\n    this._coords = coords;\n    this._options = Object.assign({}, defaultMarkerOptions, options);\n  }\n\n  get coords() {\n    return this._coords;\n  }\n\n  get options() {\n    return this._options;\n  }\n\n  render(context, position) {\n    let renderFunction = null;\n\n    switch (this.options.type) {\n      case 'marker':\n        renderFunction = this.renderMarker;\n        break;\n\n      case 'circle':\n        renderFunction = this.renderCircle;\n        break;\n\n      case 'donut':\n        renderFunction = this.renderDonut;\n        break;\n    }\n\n    if (!renderFunction) {\n      throw new Error(`Unsupported marker type: \"${this.options.type}\"`);\n    } else {\n      context.fillStyle = this.options.color;\n      context.strokeStyle = this.options.color;\n\n      renderFunction = renderFunction.bind(this);\n      renderFunction(context, position);\n    }\n  }\n\n  renderCircle(context, position) {\n    context.save();\n    context.beginPath();\n    context.arc(position[0], position[1], 5, 0, 2 * Math.PI);\n    context.fill();\n    context.restore();\n  }\n\n  renderDonut(context, position) {\n    context.save();\n    context.beginPath();\n    context.lineWidth = 5;\n    context.arc(position[0], position[1], 7, 0, 2 * Math.PI);\n    context.stroke();\n    context.restore();\n  }\n\n  renderMarker(context, position) {\n    const markerWidth = 17.698069;\n    const markerHeight = 24.786272;\n\n    const x = position[0] - markerWidth / 2;\n    const y = position[1] - markerHeight;\n\n    context.save();\n    context.transform(0.184386, 0.000000, 0.000000, 0.184386, 0.551658 + x, 4.095760 + y);\n    context.beginPath();\n    context.lineWidth = 1.667195;\n    context.moveTo(45.000000, -22.212949);\n    context.bezierCurveTo(18.494941, -22.212949, -2.991863, -0.726145, -2.991863, 25.778914);\n    context.bezierCurveTo(-2.991863, 52.282306, 45.000000, 112.212950, 45.000000, 112.212950);\n    context.bezierCurveTo(45.000000, 112.212950, 92.991863, 52.282306, 92.991863, 25.777247);\n    context.bezierCurveTo(92.991863, -0.726145, 71.505059, -22.212949, 45.000000, -22.212949);\n    context.moveTo(45.000000, 43.827962);\n    context.bezierCurveTo(33.553042, 43.827962, 24.273437, 34.550024, 24.273437, 23.103067);\n    context.bezierCurveTo(24.273437, 11.656109, 33.553042, 2.376504, 45.000000, 2.376504);\n    context.bezierCurveTo(56.446958, 2.376504, 65.726563, 11.654442, 65.726563, 23.101399);\n    context.bezierCurveTo(65.726563, 34.548357, 56.446958, 43.827962, 45.000000, 43.827962);\n    context.fill();\n    context.restore();\n  }\n}\n"],"sourceRoot":""}