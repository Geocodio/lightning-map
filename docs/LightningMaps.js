!function(t,n){"object"==typeof exports&&"object"==typeof module?module.exports=n():"function"==typeof define&&define.amd?define("LightningMaps",[],n):"object"==typeof exports?exports.LightningMaps=n():t.LightningMaps=n()}(window,function(){return function(t){var n={};function e(r){if(n[r])return n[r].exports;var i=n[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,e),i.l=!0,i.exports}return e.m=t,e.c=n,e.d=function(t,n,r){e.o(t,n)||Object.defineProperty(t,n,{enumerable:!0,get:r})},e.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},e.t=function(t,n){if(1&n&&(t=e(t)),8&n)return t;if(4&n&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(e.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&n&&"string"!=typeof t)for(var i in t)e.d(r,i,function(n){return t[n]}.bind(null,i));return r},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,n){return Object.prototype.hasOwnProperty.call(t,n)},e.p="",e(e.s=2)}([function(t,n,e){"use strict";function r(t,n){for(var e=0;e<n.length;e++){var r=n[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i=function(){function t(){!function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,t)}return function(t,n,e){n&&r(t.prototype,n),e&&r(t,e)}(t,null,[{key:"lon2tile",value:function(t,n){var e=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=(t+180)/360*Math.pow(2,n);return e?Math.floor(r):r}},{key:"lat2tile",value:function(t,n){var e=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=(1-Math.log(Math.tan(t*Math.PI/180)+1/Math.cos(t*Math.PI/180))/Math.PI)/2*Math.pow(2,n);return e?Math.floor(r):r}},{key:"tile2lon",value:function(t,n){return t/Math.pow(2,n)*360-180}},{key:"tile2lat",value:function(t,n){var e=Math.PI-2*Math.PI*t/Math.pow(2,n);return 180/Math.PI*Math.atan(.5*(Math.exp(e)-Math.exp(-e)))}},{key:"tile2boundingBox",value:function(n,e,r){return{ne:[t.tile2lat(e,r),t.tile2lon(n+1,r)],sw:[t.tile2lat(e+1,r),t.tile2lon(n,r)]}}},{key:"pixelToLatLon",value:function(n,e,r,i){var o=[n[0]/i,n[1]/i],a=t.lon2tile(e[1],r,!1)-o[0],u=t.lat2tile(e[0],r,!1)-o[1];return[t.tile2lat(u,r),t.tile2lon(a,r)]}},{key:"latLonToPixel",value:function(n,e,r,i,o){var a=t.lon2tile(n[1],r,!1),u=t.lat2tile(n[0],r,!1);return[-(a-t.lon2tile(e[1],r,!1))*i,-(u-t.lat2tile(e[0],r,!1))*i]}}]),t}();n.default=i,t.exports=n.default},function(t,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.defaultPolygonOptions=n.defaultMarkerOptions=n.defaultMapOptions=void 0;n.defaultMapOptions={source:function(t,n,e){return"https://maps.geocod.io/tiles/base/".concat(e,"/").concat(t,"/").concat(n,".png")},zoom:12,center:[38.841779,-77.088312],attribution:"Â© OpenStreetMap contributors",tileSize:256,panAccelerationMultiplier:2,maxPanAcceleration:3.5,throwTimingThresholdMs:100,throwVelocityThreshold:3e3,animationDurationMs:300,debounceIntervalMs:200,tileAreaMultiplier:2,debug:!1};n.defaultMarkerOptions={color:"rgba(0, 0, 200, 0.7)",type:"marker"};n.defaultPolygonOptions={color:"rgba(0, 0, 200, 0.7)"}},function(t,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=a(e(3)),i=a(e(7)),o=a(e(8));function a(t){return t&&t.__esModule?t:{default:t}}var u={Map:r.default,Marker:i.default,Polygon:o.default};n.default=u,t.exports=n.default},function(t,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=u(e(0)),i=u(e(4)),o=u(e(6)),a=e(1);function u(t){return t&&t.__esModule?t:{default:t}}function s(t,n){for(var e=0;e<n.length;e++){var r=n[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var c=function(){function t(n,e){if(function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,t),!n||!n.getContext)throw new Error("Could not get canvas context");this.canvas=n,this.context=this.canvas.getContext("2d"),this.options=Object.assign({},a.defaultMapOptions,e),this.initializeState(),this.attachEvents(),this.applyStyles(),this.lastDrawState=null,this.draw=this.draw.bind(this),window.requestAnimationFrame(this.draw)}return function(t,n,e){n&&s(t.prototype,n),e&&s(t,e)}(t,[{key:"initializeState",value:function(){this.state={canvasDimensions:[this.canvas.width,this.canvas.height],tiles:{},moveOffset:[0,0],targetMoveOffset:[0,0],targetMoveOffsetIsCoord:!1,moveAnimationStart:null,dragStartPosition:null,lastEventActionTime:null,startZoom:this.options.zoom,targetZoom:this.options.zoom,zoomAnimationStart:null,scale:1,lastMouseMoveEvent:null,mouseVelocities:[],markers:[],polygons:[],tileLayers:[new i.default(this)]}}},{key:"getZoom",value:function(){return this.options.zoom}},{key:"setZoom",value:function(t){this.zoomValueIsValid(t)&&(this.state.tileLayers.push(new i.default(this,t)),this.state.lastEventActionTime=window.performance.now(),this.state.zoomAnimationStart=window.performance.now(),this.state.targetZoom=t,this.state.startZoom=this.options.zoom)}},{key:"setCenter",value:function(t){if(!Array.isArray(t)||2!==t.length)throw new Error("Please provide a valid array with a lat/lon");t=t.map(function(t){return parseFloat(t)}),this.state.moveAnimationStart=window.performance.now(),this.state.targetMoveOffset=t,this.state.targetMoveOffsetIsCoord=!0}},{key:"setTargetMoveOffset",value:function(t,n){!(arguments.length>2&&void 0!==arguments[2])||arguments[2]?(this.state.moveAnimationStart=window.performance.now(),this.state.targetMoveOffset=r.default.pixelToLatLon([t,n],this.options.center,this.options.zoom,this.options.tileSize),this.state.targetMoveOffsetIsCoord=!0):(this.state.targetMoveOffset=[t,n],this.state.targetMoveOffsetIsCoord=!1,this.state.moveOffset=this.state.targetMoveOffset)}},{key:"zoomValueIsValid",value:function(t){return t>=1&&t<=18}},{key:"isReadyForEvent",value:function(){return!this.state.lastEventActionTime||window.performance.now()-this.state.lastEventActionTime>this.options.debounceIntervalMs}},{key:"calculateVelocity",value:function(t,n,e,r){return(t-n)/(e-r)*1e3}},{key:"attachEvents",value:function(){var t=this;this.canvas.addEventListener("wheel",function(n){n.preventDefault(),t.isReadyForEvent()&&(n.deltaY>5?t.setZoom(t.options.zoom-1):n.deltaY<-5&&t.setZoom(t.options.zoom+1))}),this.canvas.addEventListener("dblclick",function(n){n.preventDefault();var e=t.state.canvasDimensions[0]/2,r=t.state.canvasDimensions[1]/2;t.setTargetMoveOffset(-(n.clientX-e),-(n.clientY-r)),t.setZoom(t.options.zoom+1)}),this.canvas.addEventListener("mousedown",function(n){n.preventDefault(),t.state.mouseVelocities=[],t.state.dragStartPosition=[n.clientX-t.state.moveOffset[0],n.clientY-t.state.moveOffset[1]]}),this.canvas.addEventListener("mouseup",function(n){n.preventDefault();var e=-(t.state.dragStartPosition[0]-n.clientX),r=-(t.state.dragStartPosition[1]-n.clientY);if(0!==t.state.moveOffset[0]||0!==t.state.moveOffset[1]){var i=window.performance.now()-t.options.throwTimingThresholdMs,o=t.state.mouseVelocities.filter(function(t){return t[0]>i}).map(function(t){return t[1]}),a=o.reduce(function(t,n){return t+n},0)/o.length;if(a>=t.options.throwVelocityThreshold){var u=a/t.options.throwVelocityThreshold*t.options.panAccelerationMultiplier;u=Math.min(u,t.options.maxPanAcceleration),t.setTargetMoveOffset(e*u,r*u)}else t.updateCenter()}t.state.dragStartPosition=null}),this.canvas.addEventListener("mousemove",function(n){if(n.preventDefault(),t.state.dragStartPosition){var e=-(t.state.dragStartPosition[0]-n.clientX),r=-(t.state.dragStartPosition[1]-n.clientY),i=window.performance.now(),o=t.calculateVelocity(t.state.moveOffset[0],e,i,t.state.lastMouseMoveEvent),a=t.calculateVelocity(t.state.moveOffset[1],r,i,t.state.lastMouseMoveEvent),u=Math.round(Math.sqrt(o*o+a*a));t.state.mouseVelocities.push([i,u]),t.setTargetMoveOffset(e,r,!1),t.state.lastMouseMoveEvent=window.performance.now()}return!1})}},{key:"applyStyles",value:function(){this.canvas.style.cursor="grab"}},{key:"easeOutQuad",value:function(t){return t*(2-t)}},{key:"updateMoveOffset",value:function(){if(this.state.moveOffset!==this.state.targetMoveOffset){var t=window.performance.now(),n=Math.max(t-this.state.moveAnimationStart,0),e=this.easeOutQuad(n/this.options.animationDurationMs),i=this.state.targetMoveOffset;this.state.targetMoveOffsetIsCoord&&(i=r.default.latLonToPixel(this.state.targetMoveOffset,this.options.center,this.options.zoom,this.options.tileSize,this.state.canvasDimensions)),this.state.moveOffset=e>=.99?i:[this.state.moveOffset[0]+(i[0]-this.state.moveOffset[0])*e,this.state.moveOffset[1]+(i[1]-this.state.moveOffset[1])*e],this.state.moveOffset===i&&this.updateCenter()}}},{key:"updateCenter",value:function(){var t=r.default.pixelToLatLon(this.state.moveOffset,this.options.center,this.options.zoom,this.options.tileSize);this.setTargetMoveOffset(0,0,!1),this.options.center=t}},{key:"updateZoom",value:function(){if(this.options.zoom!==this.state.targetZoom){var t=Math.max(window.performance.now()-this.state.zoomAnimationStart,0),n=this.easeOutQuad(t/this.options.animationDurationMs),e=Math.abs(this.state.targetZoom-this.state.startZoom);this.state.targetZoom<=this.state.startZoom&&(e*=-1);var r=e*n,i=this.options.animationDurationMs-t;this.options.zoom=i<=5?this.state.targetZoom:this.state.startZoom+r;var o=Math.round(this.options.zoom),a=this.options.zoom-o;this.state.scale=Math.pow(2,a),this.options.zoom===this.state.targetZoom&&(this.state.tileLayers.shift(),this.state.tileLayers[0].tilesZoomLevel=null)}else this.state.scale=1}},{key:"garbageCollect",value:function(){var t=this,n=Object.values(this.state.tiles);if(n.length>this.maxTilesToKeep()){var e=(new Date).getTime()-5e3,r=n.filter(function(t){return t.lastRequested<e}).sort(function(t,n){return~~(t.lastRequested<n.lastRequested)}),i=this.maxTilesToKeep()-(n.length-r.length);r.splice(r.length-i).forEach(function(n){n.src="",delete t.state.tiles[n.tileId]})}}},{key:"maxTilesToKeep",value:function(){return 1e3}},{key:"shouldRedraw",value:function(){var t=JSON.stringify([this.state,this.options]);return this.lastDrawState!==t&&(this.lastDrawState=t,!0)}},{key:"draw",value:function(){this.updateMoveOffset(),this.updateZoom(),this.state.tileLayers.forEach(function(t){return t.calculateGrid()}),this.garbageCollect(),this.shouldRedraw()&&(this.state.tileLayers.length>0&&this.state.tileLayers[0].drawTiles(this.state.scale),this.drawMarkers(),this.drawPolygons(),this.drawAttribution()),window.requestAnimationFrame(this.draw)}},{key:"getMapBounds",value:function(){return{nw:r.default.pixelToLatLon([this.state.canvasDimensions[0]/2,this.state.canvasDimensions[1]/2],this.options.center,this.options.zoom,this.options.tileSize),se:r.default.pixelToLatLon([-this.state.canvasDimensions[0]/2,-this.state.canvasDimensions[1]/2],this.options.center,this.options.zoom,this.options.tileSize)}}},{key:"drawMarkers",value:function(){var t=this,n=this.getMapBounds(),e=this.state.markers.filter(function(t){return t.coords[0]<=n.nw[0]&&t.coords[0]>=n.se[0]&&t.coords[1]>=n.nw[1]&&t.coords[1]<=n.se[1]}),i=[this.state.canvasDimensions[0]/2,this.state.canvasDimensions[1]/2];e.map(function(n){var e=r.default.latLonToPixel(n.coords,t.options.center,t.options.zoom,t.options.tileSize,t.state.canvasDimensions);n.render(t.context,[i[0]-e[0]+t.state.moveOffset[0],i[1]-e[1]+t.state.moveOffset[1]])})}},{key:"drawPolygons",value:function(){var t=this,n=new o.default(this.options.center,this.options.zoom,this.options.tileSize,this.state.canvasDimensions,this.state.moveOffset);this.state.polygons.map(function(e){e.render(t.context,n)})}},{key:"drawAttribution",value:function(){this.context.font="bold 12px sans-serif";var t=this.context.measureText(this.options.attribution),n=this.state.canvasDimensions[0]-t.width-4,e=this.state.canvasDimensions[1]-2-4;this.context.fillStyle="rgba(255, 255, 255, 0.7)",this.roundedRectangle(n-4,e-15,t.width+80,80),this.context.fillStyle="rgba(0, 0, 0, 0.7)",this.context.fillText(this.options.attribution,n,e)}},{key:"roundedRectangle",value:function(t,n,e,r){this.context.beginPath(),this.context.moveTo(t+5,n),this.context.lineTo(t+e-5,n),this.context.quadraticCurveTo(t+e,n,t+e,n+5),this.context.lineTo(t+e,n+r-5),this.context.quadraticCurveTo(t+e,n+r,t+e-5,n+r),this.context.lineTo(t+5,n+r),this.context.quadraticCurveTo(t,n+r,t,n+r-5),this.context.lineTo(t,n+5),this.context.quadraticCurveTo(t,n,t+5,n),this.context.closePath(),this.context.fill()}},{key:"addMarker",value:function(t){this.state.markers.push(t)}},{key:"addMarkers",value:function(t){var n=this;t.map(function(t){return n.addMarker(t)})}},{key:"addPolygon",value:function(t){this.state.polygons.push(t)}}]),t}();n.default=c,t.exports=n.default},function(t,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=o(e(0)),i=o(e(5));function o(t){return t&&t.__esModule?t:{default:t}}function a(t,n){for(var e=0;e<n.length;e++){var r=n[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var u=function(){function t(n){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;!function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,t),this.map=n,this.tilesZoomLevel=e,this.shouldBeDeleted=!1,this.context=n.context,this.state={grid:[],gridHash:null,relativeTileOffset:[0,0]}}return function(t,n,e){n&&a(t.prototype,n),e&&a(t,e)}(t,[{key:"toJSON",value:function(){return[this.state,this.loadedPercentage()]}},{key:"getTilesCount",value:function(t){var n=Math.ceil(t/this.map.options.tileSize)*this.map.options.tileAreaMultiplier;return n%2==0&&n++,n}},{key:"calculateGrid",value:function(){var t=this.map,n=t.state,e=t.options,o=r.default.lat2tile(e.center[0],Math.round(this.tilesZoomLevel||e.zoom),!1),a=r.default.lon2tile(e.center[1],Math.round(this.tilesZoomLevel||e.zoom),!1),u=[o,a].join(",");if(this.state.gridHash!==u){var s=this.getTilesCount(n.canvasDimensions[0]),c=this.getTilesCount(n.canvasDimensions[1]),l=Math.floor(o),f=Math.floor(a);this.state.relativeTileOffset=[Math.abs(a-f),Math.abs(o-l)];for(var h=f-Math.floor(s/2),p=l-Math.floor(c/2),v=[],d=0;d<c;d++)for(var g=0;g<s;g++){v[g]||(v[g]=[]);var m=h+g,y=p+d;m>=0&&y>=0&&(v[g][d]=new i.default(m,y,Math.round(this.tilesZoomLevel||e.zoom)),this.ensureTileAsset(v[g][d]))}this.state.grid=v,this.state.gridHash=u}}},{key:"ensureTileAsset",value:function(t){var n=this;if(!(t.id in this.map.state.tiles)){var e=this.map.options.source(Math.floor(t.x),Math.floor(t.y),t.zoom);this.map.state.tiles[t.id]=new Image,this.map.state.tiles[t.id].tileId=t.id,this.map.state.tiles[t.id].src=e,this.map.state.tiles[t.id].loaded=!1,this.map.state.tiles[t.id].onload=function(){n.map.state.tiles[t.id].loaded=!0}}this.map.state.tiles[t.id].lastRequested=(new Date).getTime()}},{key:"drawTiles",value:function(t){var n=this.map.state.canvasDimensions[0],e=this.map.state.canvasDimensions[1],r=this.map.options.tileSize*t,i=[r/2-this.state.relativeTileOffset[0]*r,r/2-this.state.relativeTileOffset[1]*r];this.context.fillStyle="#EEE",this.context.fillRect(0,0,n,e);for(var o=this.getTilesCount(n),a=this.getTilesCount(e),u=o*r-n,s=a*r-e,c=0;c<a;c++)for(var l=0;l<o;l++){var f=this.state.grid[l][c];if(f){var h=this.map.state.moveOffset[0]+i[0]+(l*r-u/2),p=this.map.state.moveOffset[1]+i[1]+(c*r-s/2);try{this.map.state.tiles[f.id].loaded?this.context.drawImage(this.map.state.tiles[f.id],h,p,r,r):this.drawGenericBackground(h,p,r)}catch(t){this.drawGenericBackground(h,p,r)}this.map.options.debug&&(this.context.strokeStyle="green",this.context.strokeRect(h,p,r,r))}}this.map.options.debug&&(this.context.fillStyle="rgba(200, 0, 0, 0.7)",this.context.beginPath(),this.context.arc(n/2,e/2,5,0,2*Math.PI),this.context.fill())}},{key:"drawGenericBackground",value:function(t,n,e){var r=e/8;this.context.beginPath();for(var i=r;i<e;i+=r)for(var o=r;o<e;o+=r)this.context.moveTo(t,n+o),this.context.lineTo(t+e,n+o),this.context.moveTo(t+i,n),this.context.lineTo(t+i,n+e);this.context.strokeStyle="#DDD",this.context.stroke(),this.context.strokeStyle="#CCC",this.context.strokeRect(t,n,e,e)}},{key:"loadedPercentage",value:function(){for(var t=this.getTilesCount(this.map.state.canvasDimensions[0]),n=this.getTilesCount(this.map.state.canvasDimensions[1]),e=t*n,r=0,i=0;i<n;i++)for(var o=0;o<t;o++){var a=this.state.grid[o][i];this.map.state.tiles[a.id].loaded&&r++}return r/e}}]),t}();n.default=u,t.exports=n.default},function(t,n,e){"use strict";function r(t,n){for(var e=0;e<n.length;e++){var r=n[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i=function(){function t(n,e,r){!function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,t),this._x=n,this._y=e,this._zoom=r}return function(t,n,e){n&&r(t.prototype,n),e&&r(t,e)}(t,[{key:"x",get:function(){return this._x}},{key:"y",get:function(){return this._y}},{key:"zoom",get:function(){return this._zoom}},{key:"id",get:function(){return[this.x,this.y,this.zoom].join("|")}}]),t}();n.default=i,t.exports=n.default},function(t,n,e){"use strict";function r(t,n){for(var e=0;e<n.length;e++){var r=n[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i=function(){function t(n,e,r,i,o){!function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,t),this._center=n,this._zoom=e,this._tileSize=r,this._canvasDimensions=i,this._moveOffset=o}return function(t,n,e){n&&r(t.prototype,n),e&&r(t,e)}(t,[{key:"center",get:function(){return this._center}},{key:"zoom",get:function(){return this._zoom}},{key:"tileSize",get:function(){return this._tileSize}},{key:"canvasDimensions",get:function(){return this._canvasDimensions}},{key:"moveOffset",get:function(){return this._moveOffset}}]),t}();n.default=i,t.exports=n.default},function(t,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=e(1);function i(t,n){for(var e=0;e<n.length;e++){var r=n[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var o=function(){function t(n){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};!function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,t),this._coords=n,this._options=Object.assign({},r.defaultMarkerOptions,e)}return function(t,n,e){n&&i(t.prototype,n),e&&i(t,e)}(t,[{key:"render",value:function(t,n){var e=null;switch(this.options.type){case"marker":e=this.renderMarker;break;case"circle":e=this.renderCircle;break;case"donut":e=this.renderDonut}if(!e)throw new Error('Unsupported marker type: "'.concat(this.options.type,'"'));t.fillStyle=this.options.color,t.strokeStyle=this.options.color,(e=e.bind(this))(t,n)}},{key:"renderCircle",value:function(t,n){t.save(),t.beginPath(),t.arc(n[0],n[1],5,0,2*Math.PI),t.fill(),t.restore()}},{key:"renderDonut",value:function(t,n){t.save(),t.beginPath(),t.lineWidth=5,t.arc(n[0],n[1],7,0,2*Math.PI),t.stroke(),t.restore()}},{key:"renderMarker",value:function(t,n){var e=n[0]-8.8490345,r=n[1]-24.786272;t.save(),t.transform(.184386,0,0,.184386,.551658+e,4.09576+r),t.beginPath(),t.lineWidth=1.667195,t.moveTo(45,-22.212949),t.bezierCurveTo(18.494941,-22.212949,-2.991863,-.726145,-2.991863,25.778914),t.bezierCurveTo(-2.991863,52.282306,45,112.21295,45,112.21295),t.bezierCurveTo(45,112.21295,92.991863,52.282306,92.991863,25.777247),t.bezierCurveTo(92.991863,-.726145,71.505059,-22.212949,45,-22.212949),t.moveTo(45,43.827962),t.bezierCurveTo(33.553042,43.827962,24.273437,34.550024,24.273437,23.103067),t.bezierCurveTo(24.273437,11.656109,33.553042,2.376504,45,2.376504),t.bezierCurveTo(56.446958,2.376504,65.726563,11.654442,65.726563,23.101399),t.bezierCurveTo(65.726563,34.548357,56.446958,43.827962,45,43.827962),t.fill(),t.restore()}},{key:"coords",get:function(){return this._coords}},{key:"options",get:function(){return this._options}}]),t}();n.default=o,t.exports=n.default},function(t,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=e(1),i=function(t){return t&&t.__esModule?t:{default:t}}(e(0)),o=e(9),a=e(10);function u(t,n){for(var e=0;e<n.length;e++){var r=n[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var s={},c=function(){function t(n){var e=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};!function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,t),this._sourceUrl=n,this._options=Object.assign({},r.defaultPolygonOptions,i),this._geometry=null,fetch(this._sourceUrl).then(function(t){return t.json()}).then(function(t){e._geometry=t}).catch(function(t){return console.log("Could not load ".concat(e._sourceUrl,": ").concat(t.message||t))})}return function(t,n,e){n&&u(t.prototype,n),e&&u(t,e)}(t,[{key:"render",value:function(t,n){if(this._geometry){t.fillStyle=this.options.color,t.strokeStyle=this.options.color,this.mapState=n;var e=[this.mapState.canvasDimensions[0]/2,this.mapState.canvasDimensions[1]/2],r=(0,o.geoTransform)({point:this.projectPoint,mapState:n,center:e}),i=(0,o.geoPath)(r).context(t);t.beginPath(),i((0,a.mesh)(this._geometry)),t.stroke()}}},{key:"projectPoint",value:function(t,n){var e=this,r=function(t,n,r){var o=JSON.stringify([[n,t],e.mapState.center,e.mapState.zoom,e.mapState.tileSize,e.mapState.canvasDimensions]);if(o in s)return s[o];var a=i.default.latLonToPixel([n,t],e.mapState.center,e.mapState.zoom,e.mapState.tileSize,e.mapState.canvasDimensions);return s[o]=a,a}(t,n,this.mapState),o=this.center[0]-r[0]+this.mapState.moveOffset[0],a=this.center[1]-r[1]+this.mapState.moveOffset[1];this.stream.point(o,a)}},{key:"sourceUrl",get:function(){return this._sourceUrl}},{key:"options",get:function(){return this._options}}]),t}();n.default=c,t.exports=n.default},function(t,n,e){"use strict";e.r(n);var r=function(){return new i};function i(){this.reset()}i.prototype={constructor:i,reset:function(){this.s=this.t=0},add:function(t){a(o,t,this.t),a(this,o.s,this.s),this.s?this.t+=o.t:this.s=o.t},valueOf:function(){return this.s}};var o=new i;function a(t,n,e){var r=t.s=n+e,i=r-n,o=r-i;t.t=n-o+(e-i)}var u=1e-6,s=Math.PI,c=s/2,l=s/4,f=2*s,h=180/s,p=s/180,v=Math.abs,d=Math.atan,g=Math.atan2,m=Math.cos,y=Math.ceil,M=Math.exp,E=(Math.floor,Math.log),S=Math.pow,w=Math.sin,b=Math.sign||function(t){return t>0?1:t<0?-1:0},x=Math.sqrt,k=Math.tan;function _(t){return t>1?0:t<-1?s:Math.acos(t)}function P(t){return t>1?c:t<-1?-c:Math.asin(t)}function O(t){return(t=w(t/2))*t}function T(){}function z(t,n){t&&A.hasOwnProperty(t.type)&&A[t.type](t,n)}var C={Feature:function(t,n){z(t.geometry,n)},FeatureCollection:function(t,n){for(var e=t.features,r=-1,i=e.length;++r<i;)z(e[r].geometry,n)}},A={Sphere:function(t,n){n.sphere()},Point:function(t,n){t=t.coordinates,n.point(t[0],t[1],t[2])},MultiPoint:function(t,n){for(var e=t.coordinates,r=-1,i=e.length;++r<i;)t=e[r],n.point(t[0],t[1],t[2])},LineString:function(t,n){j(t.coordinates,n,0)},MultiLineString:function(t,n){for(var e=t.coordinates,r=-1,i=e.length;++r<i;)j(e[r],n,0)},Polygon:function(t,n){L(t.coordinates,n)},MultiPolygon:function(t,n){for(var e=t.coordinates,r=-1,i=e.length;++r<i;)L(e[r],n)},GeometryCollection:function(t,n){for(var e=t.geometries,r=-1,i=e.length;++r<i;)z(e[r],n)}};function j(t,n,e){var r,i=-1,o=t.length-e;for(n.lineStart();++i<o;)r=t[i],n.point(r[0],r[1],r[2]);n.lineEnd()}function L(t,n){var e=-1,r=t.length;for(n.polygonStart();++e<r;)j(t[e],n,1);n.polygonEnd()}var D,N,R,q,I,Z=function(t,n){t&&C.hasOwnProperty(t.type)?C[t.type](t,n):z(t,n)},G=r(),V=r(),F={point:T,lineStart:T,lineEnd:T,polygonStart:function(){G.reset(),F.lineStart=B,F.lineEnd=U},polygonEnd:function(){var t=+G;V.add(t<0?f+t:t),this.lineStart=this.lineEnd=this.point=T},sphere:function(){V.add(f)}};function B(){F.point=Y}function U(){H(D,N)}function Y(t,n){F.point=H,D=t,N=n,R=t*=p,q=m(n=(n*=p)/2+l),I=w(n)}function H(t,n){n=(n*=p)/2+l;var e=(t*=p)-R,r=e>=0?1:-1,i=r*e,o=m(n),a=w(n),u=I*a,s=q*o+u*m(i),c=u*r*w(i);G.add(g(c,s)),R=t,q=o,I=a}var W=function(t){return V.reset(),Z(t,F),2*V};function X(t){return[g(t[1],t[0]),P(t[2])]}function J(t){var n=t[0],e=t[1],r=m(e);return[r*m(n),r*w(n),w(e)]}function K(t,n){return t[0]*n[0]+t[1]*n[1]+t[2]*n[2]}function Q(t,n){return[t[1]*n[2]-t[2]*n[1],t[2]*n[0]-t[0]*n[2],t[0]*n[1]-t[1]*n[0]]}function $(t,n){t[0]+=n[0],t[1]+=n[1],t[2]+=n[2]}function tt(t,n){return[t[0]*n,t[1]*n,t[2]*n]}function nt(t){var n=x(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=n,t[1]/=n,t[2]/=n}var et,rt,it,ot,at,ut,st,ct,lt,ft,ht=r(),pt={point:vt,lineStart:gt,lineEnd:mt,polygonStart:function(){pt.point=yt,pt.lineStart=Mt,pt.lineEnd=Et,ht.reset(),F.polygonStart()},polygonEnd:function(){F.polygonEnd(),pt.point=vt,pt.lineStart=gt,pt.lineEnd=mt,G<0?(et=-(it=180),rt=-(ot=90)):ht>u?ot=90:ht<-u&&(rt=-90),ft[0]=et,ft[1]=it}};function vt(t,n){lt.push(ft=[et=t,it=t]),n<rt&&(rt=n),n>ot&&(ot=n)}function dt(t,n){var e=J([t*p,n*p]);if(ct){var r=Q(ct,e),i=Q([r[1],-r[0],0],r);nt(i),i=X(i);var o,a=t-at,u=a>0?1:-1,s=i[0]*h*u,c=v(a)>180;c^(u*at<s&&s<u*t)?(o=i[1]*h)>ot&&(ot=o):c^(u*at<(s=(s+360)%360-180)&&s<u*t)?(o=-i[1]*h)<rt&&(rt=o):(n<rt&&(rt=n),n>ot&&(ot=n)),c?t<at?St(et,t)>St(et,it)&&(it=t):St(t,it)>St(et,it)&&(et=t):it>=et?(t<et&&(et=t),t>it&&(it=t)):t>at?St(et,t)>St(et,it)&&(it=t):St(t,it)>St(et,it)&&(et=t)}else lt.push(ft=[et=t,it=t]);n<rt&&(rt=n),n>ot&&(ot=n),ct=e,at=t}function gt(){pt.point=dt}function mt(){ft[0]=et,ft[1]=it,pt.point=vt,ct=null}function yt(t,n){if(ct){var e=t-at;ht.add(v(e)>180?e+(e>0?360:-360):e)}else ut=t,st=n;F.point(t,n),dt(t,n)}function Mt(){F.lineStart()}function Et(){yt(ut,st),F.lineEnd(),v(ht)>u&&(et=-(it=180)),ft[0]=et,ft[1]=it,ct=null}function St(t,n){return(n-=t)<0?n+360:n}function wt(t,n){return t[0]-n[0]}function bt(t,n){return t[0]<=t[1]?t[0]<=n&&n<=t[1]:n<t[0]||t[1]<n}var xt,kt,_t,Pt,Ot,Tt,zt,Ct,At,jt,Lt,Dt,Nt,Rt,qt,It,Zt=function(t){var n,e,r,i,o,a,u;if(ot=it=-(et=rt=1/0),lt=[],Z(t,pt),e=lt.length){for(lt.sort(wt),n=1,o=[r=lt[0]];n<e;++n)bt(r,(i=lt[n])[0])||bt(r,i[1])?(St(r[0],i[1])>St(r[0],r[1])&&(r[1]=i[1]),St(i[0],r[1])>St(r[0],r[1])&&(r[0]=i[0])):o.push(r=i);for(a=-1/0,n=0,r=o[e=o.length-1];n<=e;r=i,++n)i=o[n],(u=St(r[1],i[0]))>a&&(a=u,et=i[0],it=r[1])}return lt=ft=null,et===1/0||rt===1/0?[[NaN,NaN],[NaN,NaN]]:[[et,rt],[it,ot]]},Gt={sphere:T,point:Vt,lineStart:Bt,lineEnd:Ht,polygonStart:function(){Gt.lineStart=Wt,Gt.lineEnd=Xt},polygonEnd:function(){Gt.lineStart=Bt,Gt.lineEnd=Ht}};function Vt(t,n){t*=p;var e=m(n*=p);Ft(e*m(t),e*w(t),w(n))}function Ft(t,n,e){_t+=(t-_t)/++xt,Pt+=(n-Pt)/xt,Ot+=(e-Ot)/xt}function Bt(){Gt.point=Ut}function Ut(t,n){t*=p;var e=m(n*=p);Rt=e*m(t),qt=e*w(t),It=w(n),Gt.point=Yt,Ft(Rt,qt,It)}function Yt(t,n){t*=p;var e=m(n*=p),r=e*m(t),i=e*w(t),o=w(n),a=g(x((a=qt*o-It*i)*a+(a=It*r-Rt*o)*a+(a=Rt*i-qt*r)*a),Rt*r+qt*i+It*o);kt+=a,Tt+=a*(Rt+(Rt=r)),zt+=a*(qt+(qt=i)),Ct+=a*(It+(It=o)),Ft(Rt,qt,It)}function Ht(){Gt.point=Vt}function Wt(){Gt.point=Jt}function Xt(){Kt(Dt,Nt),Gt.point=Vt}function Jt(t,n){Dt=t,Nt=n,t*=p,n*=p,Gt.point=Kt;var e=m(n);Rt=e*m(t),qt=e*w(t),It=w(n),Ft(Rt,qt,It)}function Kt(t,n){t*=p;var e=m(n*=p),r=e*m(t),i=e*w(t),o=w(n),a=qt*o-It*i,u=It*r-Rt*o,s=Rt*i-qt*r,c=x(a*a+u*u+s*s),l=P(c),f=c&&-l/c;At+=f*a,jt+=f*u,Lt+=f*s,kt+=l,Tt+=l*(Rt+(Rt=r)),zt+=l*(qt+(qt=i)),Ct+=l*(It+(It=o)),Ft(Rt,qt,It)}var Qt=function(t){xt=kt=_t=Pt=Ot=Tt=zt=Ct=At=jt=Lt=0,Z(t,Gt);var n=At,e=jt,r=Lt,i=n*n+e*e+r*r;return i<1e-12&&(n=Tt,e=zt,r=Ct,kt<u&&(n=_t,e=Pt,r=Ot),(i=n*n+e*e+r*r)<1e-12)?[NaN,NaN]:[g(e,n)*h,P(r/x(i))*h]},$t=function(t){return function(){return t}},tn=function(t,n){function e(e,r){return e=t(e,r),n(e[0],e[1])}return t.invert&&n.invert&&(e.invert=function(e,r){return(e=n.invert(e,r))&&t.invert(e[0],e[1])}),e};function nn(t,n){return[v(t)>s?t+Math.round(-t/f)*f:t,n]}function en(t,n,e){return(t%=f)?n||e?tn(on(t),an(n,e)):on(t):n||e?an(n,e):nn}function rn(t){return function(n,e){return[(n+=t)>s?n-f:n<-s?n+f:n,e]}}function on(t){var n=rn(t);return n.invert=rn(-t),n}function an(t,n){var e=m(t),r=w(t),i=m(n),o=w(n);function a(t,n){var a=m(n),u=m(t)*a,s=w(t)*a,c=w(n),l=c*e+u*r;return[g(s*i-l*o,u*e-c*r),P(l*i+s*o)]}return a.invert=function(t,n){var a=m(n),u=m(t)*a,s=w(t)*a,c=w(n),l=c*i-s*o;return[g(s*i+c*o,u*e+l*r),P(l*e-u*r)]},a}nn.invert=nn;var un=function(t){function n(n){return(n=t(n[0]*p,n[1]*p))[0]*=h,n[1]*=h,n}return t=en(t[0]*p,t[1]*p,t.length>2?t[2]*p:0),n.invert=function(n){return(n=t.invert(n[0]*p,n[1]*p))[0]*=h,n[1]*=h,n},n};function sn(t,n,e,r,i,o){if(e){var a=m(n),u=w(n),s=r*e;null==i?(i=n+r*f,o=n-s/2):(i=cn(a,i),o=cn(a,o),(r>0?i<o:i>o)&&(i+=r*f));for(var c,l=i;r>0?l>o:l<o;l-=s)c=X([a,-u*m(l),-u*w(l)]),t.point(c[0],c[1])}}function cn(t,n){(n=J(n))[0]-=t,nt(n);var e=_(-n[1]);return((-n[2]<0?-e:e)+f-u)%f}var ln=function(){var t,n,e=$t([0,0]),r=$t(90),i=$t(6),o={point:function(e,r){t.push(e=n(e,r)),e[0]*=h,e[1]*=h}};function a(){var a=e.apply(this,arguments),u=r.apply(this,arguments)*p,s=i.apply(this,arguments)*p;return t=[],n=en(-a[0]*p,-a[1]*p,0).invert,sn(o,u,s,1),a={type:"Polygon",coordinates:[t]},t=n=null,a}return a.center=function(t){return arguments.length?(e="function"==typeof t?t:$t([+t[0],+t[1]]),a):e},a.radius=function(t){return arguments.length?(r="function"==typeof t?t:$t(+t),a):r},a.precision=function(t){return arguments.length?(i="function"==typeof t?t:$t(+t),a):i},a},fn=function(){var t,n=[];return{point:function(n,e){t.push([n,e])},lineStart:function(){n.push(t=[])},lineEnd:T,rejoin:function(){n.length>1&&n.push(n.pop().concat(n.shift()))},result:function(){var e=n;return n=[],t=null,e}}},hn=function(t,n){return v(t[0]-n[0])<u&&v(t[1]-n[1])<u};function pn(t,n,e,r){this.x=t,this.z=n,this.o=e,this.e=r,this.v=!1,this.n=this.p=null}var vn=function(t,n,e,r,i){var o,a,u=[],s=[];if(t.forEach(function(t){if(!((n=t.length-1)<=0)){var n,e,r=t[0],a=t[n];if(hn(r,a)){for(i.lineStart(),o=0;o<n;++o)i.point((r=t[o])[0],r[1]);i.lineEnd()}else u.push(e=new pn(r,t,null,!0)),s.push(e.o=new pn(r,null,e,!1)),u.push(e=new pn(a,t,null,!1)),s.push(e.o=new pn(a,null,e,!0))}}),u.length){for(s.sort(n),dn(u),dn(s),o=0,a=s.length;o<a;++o)s[o].e=e=!e;for(var c,l,f=u[0];;){for(var h=f,p=!0;h.v;)if((h=h.n)===f)return;c=h.z,i.lineStart();do{if(h.v=h.o.v=!0,h.e){if(p)for(o=0,a=c.length;o<a;++o)i.point((l=c[o])[0],l[1]);else r(h.x,h.n.x,1,i);h=h.n}else{if(p)for(c=h.p.z,o=c.length-1;o>=0;--o)i.point((l=c[o])[0],l[1]);else r(h.x,h.p.x,-1,i);h=h.p}c=(h=h.o).z,p=!p}while(!h.v);i.lineEnd()}}};function dn(t){if(n=t.length){for(var n,e,r=0,i=t[0];++r<n;)i.n=e=t[r],e.p=i,i=e;i.n=e=t[0],e.p=i}}var gn=r(),mn=function(t,n){var e=n[0],r=n[1],i=w(r),o=[w(e),-m(e),0],a=0,h=0;gn.reset(),1===i?r=c+u:-1===i&&(r=-c-u);for(var p=0,v=t.length;p<v;++p)if(y=(d=t[p]).length)for(var d,y,M=d[y-1],E=M[0],S=M[1]/2+l,b=w(S),x=m(S),k=0;k<y;++k,E=O,b=z,x=C,M=_){var _=d[k],O=_[0],T=_[1]/2+l,z=w(T),C=m(T),A=O-E,j=A>=0?1:-1,L=j*A,D=L>s,N=b*z;if(gn.add(g(N*j*w(L),x*C+N*m(L))),a+=D?A+j*f:A,D^E>=e^O>=e){var R=Q(J(M),J(_));nt(R);var q=Q(o,R);nt(q);var I=(D^A>=0?-1:1)*P(q[2]);(r>I||r===I&&(R[0]||R[1]))&&(h+=D^A>=0?1:-1)}}return(a<-u||a<u&&gn<-u)^1&h},yn=function(t,n){return t<n?-1:t>n?1:t>=n?0:NaN};var Mn=function(t){return 1===t.length&&(t=function(t){return function(n,e){return yn(t(n),e)}}(t)),{left:function(n,e,r,i){for(null==r&&(r=0),null==i&&(i=n.length);r<i;){var o=r+i>>>1;t(n[o],e)<0?r=o+1:i=o}return r},right:function(n,e,r,i){for(null==r&&(r=0),null==i&&(i=n.length);r<i;){var o=r+i>>>1;t(n[o],e)>0?i=o:r=o+1}return r}}}(yn);Mn.right,Mn.left;var En=Array.prototype,Sn=(En.slice,En.map,function(t,n,e){t=+t,n=+n,e=(i=arguments.length)<2?(n=t,t=0,1):i<3?1:+e;for(var r=-1,i=0|Math.max(0,Math.ceil((n-t)/e)),o=new Array(i);++r<i;)o[r]=t+r*e;return o});Math.sqrt(50),Math.sqrt(10),Math.sqrt(2);var wn=function(t){for(var n,e,r,i=t.length,o=-1,a=0;++o<i;)a+=t[o].length;for(e=new Array(a);--i>=0;)for(n=(r=t[i]).length;--n>=0;)e[--a]=r[n];return e};var bn=function(t,n,e,r){return function(i){var o,a,u,s=n(i),c=fn(),l=n(c),f=!1,h={point:p,lineStart:d,lineEnd:g,polygonStart:function(){h.point=m,h.lineStart=y,h.lineEnd=M,a=[],o=[]},polygonEnd:function(){h.point=p,h.lineStart=d,h.lineEnd=g,a=wn(a);var t=mn(o,r);a.length?(f||(i.polygonStart(),f=!0),vn(a,kn,t,e,i)):t&&(f||(i.polygonStart(),f=!0),i.lineStart(),e(null,null,1,i),i.lineEnd()),f&&(i.polygonEnd(),f=!1),a=o=null},sphere:function(){i.polygonStart(),i.lineStart(),e(null,null,1,i),i.lineEnd(),i.polygonEnd()}};function p(n,e){t(n,e)&&i.point(n,e)}function v(t,n){s.point(t,n)}function d(){h.point=v,s.lineStart()}function g(){h.point=p,s.lineEnd()}function m(t,n){u.push([t,n]),l.point(t,n)}function y(){l.lineStart(),u=[]}function M(){m(u[0][0],u[0][1]),l.lineEnd();var t,n,e,r,s=l.clean(),h=c.result(),p=h.length;if(u.pop(),o.push(u),u=null,p)if(1&s){if((n=(e=h[0]).length-1)>0){for(f||(i.polygonStart(),f=!0),i.lineStart(),t=0;t<n;++t)i.point((r=e[t])[0],r[1]);i.lineEnd()}}else p>1&&2&s&&h.push(h.pop().concat(h.shift())),a.push(h.filter(xn))}return h}};function xn(t){return t.length>1}function kn(t,n){return((t=t.x)[0]<0?t[1]-c-u:c-t[1])-((n=n.x)[0]<0?n[1]-c-u:c-n[1])}var _n=bn(function(){return!0},function(t){var n,e=NaN,r=NaN,i=NaN;return{lineStart:function(){t.lineStart(),n=1},point:function(o,a){var l=o>0?s:-s,f=v(o-e);v(f-s)<u?(t.point(e,r=(r+a)/2>0?c:-c),t.point(i,r),t.lineEnd(),t.lineStart(),t.point(l,r),t.point(o,r),n=0):i!==l&&f>=s&&(v(e-i)<u&&(e-=i*u),v(o-l)<u&&(o-=l*u),r=function(t,n,e,r){var i,o,a=w(t-e);return v(a)>u?d((w(n)*(o=m(r))*w(e)-w(r)*(i=m(n))*w(t))/(i*o*a)):(n+r)/2}(e,r,o,a),t.point(i,r),t.lineEnd(),t.lineStart(),t.point(l,r),n=0),t.point(e=o,r=a),i=l},lineEnd:function(){t.lineEnd(),e=r=NaN},clean:function(){return 2-n}}},function(t,n,e,r){var i;if(null==t)i=e*c,r.point(-s,i),r.point(0,i),r.point(s,i),r.point(s,0),r.point(s,-i),r.point(0,-i),r.point(-s,-i),r.point(-s,0),r.point(-s,i);else if(v(t[0]-n[0])>u){var o=t[0]<n[0]?s:-s;i=e*o/2,r.point(-o,i),r.point(0,i),r.point(o,i)}else r.point(n[0],n[1])},[-s,-c]);var Pn=function(t){var n=m(t),e=6*p,r=n>0,i=v(n)>u;function o(t,e){return m(t)*m(e)>n}function a(t,e,r){var i=[1,0,0],o=Q(J(t),J(e)),a=K(o,o),c=o[0],l=a-c*c;if(!l)return!r&&t;var f=n*a/l,h=-n*c/l,p=Q(i,o),d=tt(i,f);$(d,tt(o,h));var g=p,m=K(d,g),y=K(g,g),M=m*m-y*(K(d,d)-1);if(!(M<0)){var E=x(M),S=tt(g,(-m-E)/y);if($(S,d),S=X(S),!r)return S;var w,b=t[0],k=e[0],_=t[1],P=e[1];k<b&&(w=b,b=k,k=w);var O=k-b,T=v(O-s)<u;if(!T&&P<_&&(w=_,_=P,P=w),T||O<u?T?_+P>0^S[1]<(v(S[0]-b)<u?_:P):_<=S[1]&&S[1]<=P:O>s^(b<=S[0]&&S[0]<=k)){var z=tt(g,(-m+E)/y);return $(z,d),[S,X(z)]}}}function c(n,e){var i=r?t:s-t,o=0;return n<-i?o|=1:n>i&&(o|=2),e<-i?o|=4:e>i&&(o|=8),o}return bn(o,function(t){var n,e,l,f,h;return{lineStart:function(){f=l=!1,h=1},point:function(p,v){var d,g=[p,v],m=o(p,v),y=r?m?0:c(p,v):m?c(p+(p<0?s:-s),v):0;if(!n&&(f=l=m)&&t.lineStart(),m!==l&&(!(d=a(n,g))||hn(n,d)||hn(g,d))&&(g[0]+=u,g[1]+=u,m=o(g[0],g[1])),m!==l)h=0,m?(t.lineStart(),d=a(g,n),t.point(d[0],d[1])):(d=a(n,g),t.point(d[0],d[1]),t.lineEnd()),n=d;else if(i&&n&&r^m){var M;y&e||!(M=a(g,n,!0))||(h=0,r?(t.lineStart(),t.point(M[0][0],M[0][1]),t.point(M[1][0],M[1][1]),t.lineEnd()):(t.point(M[1][0],M[1][1]),t.lineEnd(),t.lineStart(),t.point(M[0][0],M[0][1])))}!m||n&&hn(n,g)||t.point(g[0],g[1]),n=g,l=m,e=y},lineEnd:function(){l&&t.lineEnd(),n=null},clean:function(){return h|(f&&l)<<1}}},function(n,r,i,o){sn(o,t,e,i,n,r)},r?[0,-t]:[-s,t-s])},On=function(t,n,e,r,i,o){var a,u=t[0],s=t[1],c=0,l=1,f=n[0]-u,h=n[1]-s;if(a=e-u,f||!(a>0)){if(a/=f,f<0){if(a<c)return;a<l&&(l=a)}else if(f>0){if(a>l)return;a>c&&(c=a)}if(a=i-u,f||!(a<0)){if(a/=f,f<0){if(a>l)return;a>c&&(c=a)}else if(f>0){if(a<c)return;a<l&&(l=a)}if(a=r-s,h||!(a>0)){if(a/=h,h<0){if(a<c)return;a<l&&(l=a)}else if(h>0){if(a>l)return;a>c&&(c=a)}if(a=o-s,h||!(a<0)){if(a/=h,h<0){if(a>l)return;a>c&&(c=a)}else if(h>0){if(a<c)return;a<l&&(l=a)}return c>0&&(t[0]=u+c*f,t[1]=s+c*h),l<1&&(n[0]=u+l*f,n[1]=s+l*h),!0}}}}},Tn=1e9,zn=-Tn;function Cn(t,n,e,r){function i(i,o){return t<=i&&i<=e&&n<=o&&o<=r}function o(i,o,u,s){var l=0,f=0;if(null==i||(l=a(i,u))!==(f=a(o,u))||c(i,o)<0^u>0)do{s.point(0===l||3===l?t:e,l>1?r:n)}while((l=(l+u+4)%4)!==f);else s.point(o[0],o[1])}function a(r,i){return v(r[0]-t)<u?i>0?0:3:v(r[0]-e)<u?i>0?2:1:v(r[1]-n)<u?i>0?1:0:i>0?3:2}function s(t,n){return c(t.x,n.x)}function c(t,n){var e=a(t,1),r=a(n,1);return e!==r?e-r:0===e?n[1]-t[1]:1===e?t[0]-n[0]:2===e?t[1]-n[1]:n[0]-t[0]}return function(a){var u,c,l,f,h,p,v,d,g,m,y,M=a,E=fn(),S={point:w,lineStart:function(){S.point=b,c&&c.push(l=[]);m=!0,g=!1,v=d=NaN},lineEnd:function(){u&&(b(f,h),p&&g&&E.rejoin(),u.push(E.result()));S.point=w,g&&M.lineEnd()},polygonStart:function(){M=E,u=[],c=[],y=!0},polygonEnd:function(){var n=function(){for(var n=0,e=0,i=c.length;e<i;++e)for(var o,a,u=c[e],s=1,l=u.length,f=u[0],h=f[0],p=f[1];s<l;++s)o=h,a=p,f=u[s],h=f[0],p=f[1],a<=r?p>r&&(h-o)*(r-a)>(p-a)*(t-o)&&++n:p<=r&&(h-o)*(r-a)<(p-a)*(t-o)&&--n;return n}(),e=y&&n,i=(u=wn(u)).length;(e||i)&&(a.polygonStart(),e&&(a.lineStart(),o(null,null,1,a),a.lineEnd()),i&&vn(u,s,n,o,a),a.polygonEnd());M=a,u=c=l=null}};function w(t,n){i(t,n)&&M.point(t,n)}function b(o,a){var u=i(o,a);if(c&&l.push([o,a]),m)f=o,h=a,p=u,m=!1,u&&(M.lineStart(),M.point(o,a));else if(u&&g)M.point(o,a);else{var s=[v=Math.max(zn,Math.min(Tn,v)),d=Math.max(zn,Math.min(Tn,d))],E=[o=Math.max(zn,Math.min(Tn,o)),a=Math.max(zn,Math.min(Tn,a))];On(s,E,t,n,e,r)?(g||(M.lineStart(),M.point(s[0],s[1])),M.point(E[0],E[1]),u||M.lineEnd(),y=!1):u&&(M.lineStart(),M.point(o,a),y=!1)}v=o,d=a,g=u}return S}}var An,jn,Ln,Dn=function(){var t,n,e,r=0,i=0,o=960,a=500;return e={stream:function(e){return t&&n===e?t:t=Cn(r,i,o,a)(n=e)},extent:function(u){return arguments.length?(r=+u[0][0],i=+u[0][1],o=+u[1][0],a=+u[1][1],t=n=null,e):[[r,i],[o,a]]}}},Nn=r(),Rn={sphere:T,point:T,lineStart:function(){Rn.point=In,Rn.lineEnd=qn},lineEnd:T,polygonStart:T,polygonEnd:T};function qn(){Rn.point=Rn.lineEnd=T}function In(t,n){An=t*=p,jn=w(n*=p),Ln=m(n),Rn.point=Zn}function Zn(t,n){t*=p;var e=w(n*=p),r=m(n),i=v(t-An),o=m(i),a=r*w(i),u=Ln*e-jn*r*o,s=jn*e+Ln*r*o;Nn.add(g(x(a*a+u*u),s)),An=t,jn=e,Ln=r}var Gn=function(t){return Nn.reset(),Z(t,Rn),+Nn},Vn=[null,null],Fn={type:"LineString",coordinates:Vn},Bn=function(t,n){return Vn[0]=t,Vn[1]=n,Gn(Fn)},Un={Feature:function(t,n){return Hn(t.geometry,n)},FeatureCollection:function(t,n){for(var e=t.features,r=-1,i=e.length;++r<i;)if(Hn(e[r].geometry,n))return!0;return!1}},Yn={Sphere:function(){return!0},Point:function(t,n){return Wn(t.coordinates,n)},MultiPoint:function(t,n){for(var e=t.coordinates,r=-1,i=e.length;++r<i;)if(Wn(e[r],n))return!0;return!1},LineString:function(t,n){return Xn(t.coordinates,n)},MultiLineString:function(t,n){for(var e=t.coordinates,r=-1,i=e.length;++r<i;)if(Xn(e[r],n))return!0;return!1},Polygon:function(t,n){return Jn(t.coordinates,n)},MultiPolygon:function(t,n){for(var e=t.coordinates,r=-1,i=e.length;++r<i;)if(Jn(e[r],n))return!0;return!1},GeometryCollection:function(t,n){for(var e=t.geometries,r=-1,i=e.length;++r<i;)if(Hn(e[r],n))return!0;return!1}};function Hn(t,n){return!(!t||!Yn.hasOwnProperty(t.type))&&Yn[t.type](t,n)}function Wn(t,n){return 0===Bn(t,n)}function Xn(t,n){var e=Bn(t[0],t[1]);return Bn(t[0],n)+Bn(n,t[1])<=e+u}function Jn(t,n){return!!mn(t.map(Kn),Qn(n))}function Kn(t){return(t=t.map(Qn)).pop(),t}function Qn(t){return[t[0]*p,t[1]*p]}var $n=function(t,n){return(t&&Un.hasOwnProperty(t.type)?Un[t.type]:Hn)(t,n)};function te(t,n,e){var r=Sn(t,n-u,e).concat(n);return function(t){return r.map(function(n){return[t,n]})}}function ne(t,n,e){var r=Sn(t,n-u,e).concat(n);return function(t){return r.map(function(n){return[n,t]})}}function ee(){var t,n,e,r,i,o,a,s,c,l,f,h,p=10,d=p,g=90,m=360,M=2.5;function E(){return{type:"MultiLineString",coordinates:S()}}function S(){return Sn(y(r/g)*g,e,g).map(f).concat(Sn(y(s/m)*m,a,m).map(h)).concat(Sn(y(n/p)*p,t,p).filter(function(t){return v(t%g)>u}).map(c)).concat(Sn(y(o/d)*d,i,d).filter(function(t){return v(t%m)>u}).map(l))}return E.lines=function(){return S().map(function(t){return{type:"LineString",coordinates:t}})},E.outline=function(){return{type:"Polygon",coordinates:[f(r).concat(h(a).slice(1),f(e).reverse().slice(1),h(s).reverse().slice(1))]}},E.extent=function(t){return arguments.length?E.extentMajor(t).extentMinor(t):E.extentMinor()},E.extentMajor=function(t){return arguments.length?(r=+t[0][0],e=+t[1][0],s=+t[0][1],a=+t[1][1],r>e&&(t=r,r=e,e=t),s>a&&(t=s,s=a,a=t),E.precision(M)):[[r,s],[e,a]]},E.extentMinor=function(e){return arguments.length?(n=+e[0][0],t=+e[1][0],o=+e[0][1],i=+e[1][1],n>t&&(e=n,n=t,t=e),o>i&&(e=o,o=i,i=e),E.precision(M)):[[n,o],[t,i]]},E.step=function(t){return arguments.length?E.stepMajor(t).stepMinor(t):E.stepMinor()},E.stepMajor=function(t){return arguments.length?(g=+t[0],m=+t[1],E):[g,m]},E.stepMinor=function(t){return arguments.length?(p=+t[0],d=+t[1],E):[p,d]},E.precision=function(u){return arguments.length?(M=+u,c=te(o,i,90),l=ne(n,t,M),f=te(s,a,90),h=ne(r,e,M),E):M},E.extentMajor([[-180,-90+u],[180,90-u]]).extentMinor([[-180,-80-u],[180,80+u]])}function re(){return ee()()}var ie,oe,ae,ue,se=function(t,n){var e=t[0]*p,r=t[1]*p,i=n[0]*p,o=n[1]*p,a=m(r),u=w(r),s=m(o),c=w(o),l=a*m(e),f=a*w(e),v=s*m(i),d=s*w(i),y=2*P(x(O(o-r)+a*s*O(i-e))),M=w(y),E=y?function(t){var n=w(t*=y)/M,e=w(y-t)/M,r=e*l+n*v,i=e*f+n*d,o=e*u+n*c;return[g(i,r)*h,g(o,x(r*r+i*i))*h]}:function(){return[e*h,r*h]};return E.distance=y,E},ce=function(t){return t},le=r(),fe=r(),he={point:T,lineStart:T,lineEnd:T,polygonStart:function(){he.lineStart=pe,he.lineEnd=ge},polygonEnd:function(){he.lineStart=he.lineEnd=he.point=T,le.add(v(fe)),fe.reset()},result:function(){var t=le/2;return le.reset(),t}};function pe(){he.point=ve}function ve(t,n){he.point=de,ie=ae=t,oe=ue=n}function de(t,n){fe.add(ue*t-ae*n),ae=t,ue=n}function ge(){de(ie,oe)}var me=he,ye=1/0,Me=ye,Ee=-ye,Se=Ee;var we,be,xe,ke,_e={point:function(t,n){t<ye&&(ye=t);t>Ee&&(Ee=t);n<Me&&(Me=n);n>Se&&(Se=n)},lineStart:T,lineEnd:T,polygonStart:T,polygonEnd:T,result:function(){var t=[[ye,Me],[Ee,Se]];return Ee=Se=-(Me=ye=1/0),t}},Pe=0,Oe=0,Te=0,ze=0,Ce=0,Ae=0,je=0,Le=0,De=0,Ne={point:Re,lineStart:qe,lineEnd:Ge,polygonStart:function(){Ne.lineStart=Ve,Ne.lineEnd=Fe},polygonEnd:function(){Ne.point=Re,Ne.lineStart=qe,Ne.lineEnd=Ge},result:function(){var t=De?[je/De,Le/De]:Ae?[ze/Ae,Ce/Ae]:Te?[Pe/Te,Oe/Te]:[NaN,NaN];return Pe=Oe=Te=ze=Ce=Ae=je=Le=De=0,t}};function Re(t,n){Pe+=t,Oe+=n,++Te}function qe(){Ne.point=Ie}function Ie(t,n){Ne.point=Ze,Re(xe=t,ke=n)}function Ze(t,n){var e=t-xe,r=n-ke,i=x(e*e+r*r);ze+=i*(xe+t)/2,Ce+=i*(ke+n)/2,Ae+=i,Re(xe=t,ke=n)}function Ge(){Ne.point=Re}function Ve(){Ne.point=Be}function Fe(){Ue(we,be)}function Be(t,n){Ne.point=Ue,Re(we=xe=t,be=ke=n)}function Ue(t,n){var e=t-xe,r=n-ke,i=x(e*e+r*r);ze+=i*(xe+t)/2,Ce+=i*(ke+n)/2,Ae+=i,je+=(i=ke*t-xe*n)*(xe+t),Le+=i*(ke+n),De+=3*i,Re(xe=t,ke=n)}var Ye=Ne;function He(t){this._context=t}He.prototype={_radius:4.5,pointRadius:function(t){return this._radius=t,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._context.closePath(),this._point=NaN},point:function(t,n){switch(this._point){case 0:this._context.moveTo(t,n),this._point=1;break;case 1:this._context.lineTo(t,n);break;default:this._context.moveTo(t+this._radius,n),this._context.arc(t,n,this._radius,0,f)}},result:T};var We,Xe,Je,Ke,Qe,$e=r(),tr={point:T,lineStart:function(){tr.point=nr},lineEnd:function(){We&&er(Xe,Je),tr.point=T},polygonStart:function(){We=!0},polygonEnd:function(){We=null},result:function(){var t=+$e;return $e.reset(),t}};function nr(t,n){tr.point=er,Xe=Ke=t,Je=Qe=n}function er(t,n){Ke-=t,Qe-=n,$e.add(x(Ke*Ke+Qe*Qe)),Ke=t,Qe=n}var rr=tr;function ir(){this._string=[]}function or(t){return"m0,"+t+"a"+t+","+t+" 0 1,1 0,"+-2*t+"a"+t+","+t+" 0 1,1 0,"+2*t+"z"}ir.prototype={_radius:4.5,_circle:or(4.5),pointRadius:function(t){return(t=+t)!==this._radius&&(this._radius=t,this._circle=null),this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._string.push("Z"),this._point=NaN},point:function(t,n){switch(this._point){case 0:this._string.push("M",t,",",n),this._point=1;break;case 1:this._string.push("L",t,",",n);break;default:null==this._circle&&(this._circle=or(this._radius)),this._string.push("M",t,",",n,this._circle)}},result:function(){if(this._string.length){var t=this._string.join("");return this._string=[],t}return null}};var ar=function(t,n){var e,r,i=4.5;function o(t){return t&&("function"==typeof i&&r.pointRadius(+i.apply(this,arguments)),Z(t,e(r))),r.result()}return o.area=function(t){return Z(t,e(me)),me.result()},o.measure=function(t){return Z(t,e(rr)),rr.result()},o.bounds=function(t){return Z(t,e(_e)),_e.result()},o.centroid=function(t){return Z(t,e(Ye)),Ye.result()},o.projection=function(n){return arguments.length?(e=null==n?(t=null,ce):(t=n).stream,o):t},o.context=function(t){return arguments.length?(r=null==t?(n=null,new ir):new He(n=t),"function"!=typeof i&&r.pointRadius(i),o):n},o.pointRadius=function(t){return arguments.length?(i="function"==typeof t?t:(r.pointRadius(+t),+t),o):i},o.projection(t).context(n)},ur=function(t){return{stream:sr(t)}};function sr(t){return function(n){var e=new cr;for(var r in t)e[r]=t[r];return e.stream=n,e}}function cr(){}function lr(t,n,e){var r=t.clipExtent&&t.clipExtent();return t.scale(150).translate([0,0]),null!=r&&t.clipExtent(null),Z(e,t.stream(_e)),n(_e.result()),null!=r&&t.clipExtent(r),t}function fr(t,n,e){return lr(t,function(e){var r=n[1][0]-n[0][0],i=n[1][1]-n[0][1],o=Math.min(r/(e[1][0]-e[0][0]),i/(e[1][1]-e[0][1])),a=+n[0][0]+(r-o*(e[1][0]+e[0][0]))/2,u=+n[0][1]+(i-o*(e[1][1]+e[0][1]))/2;t.scale(150*o).translate([a,u])},e)}function hr(t,n,e){return fr(t,[[0,0],n],e)}function pr(t,n,e){return lr(t,function(e){var r=+n,i=r/(e[1][0]-e[0][0]),o=(r-i*(e[1][0]+e[0][0]))/2,a=-i*e[0][1];t.scale(150*i).translate([o,a])},e)}function vr(t,n,e){return lr(t,function(e){var r=+n,i=r/(e[1][1]-e[0][1]),o=-i*e[0][0],a=(r-i*(e[1][1]+e[0][1]))/2;t.scale(150*i).translate([o,a])},e)}cr.prototype={constructor:cr,point:function(t,n){this.stream.point(t,n)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};var dr=16,gr=m(30*p),mr=function(t,n){return+n?function(t,n){function e(r,i,o,a,s,c,l,f,h,p,d,m,y,M){var E=l-r,S=f-i,w=E*E+S*S;if(w>4*n&&y--){var b=a+p,k=s+d,_=c+m,O=x(b*b+k*k+_*_),T=P(_/=O),z=v(v(_)-1)<u||v(o-h)<u?(o+h)/2:g(k,b),C=t(z,T),A=C[0],j=C[1],L=A-r,D=j-i,N=S*L-E*D;(N*N/w>n||v((E*L+S*D)/w-.5)>.3||a*p+s*d+c*m<gr)&&(e(r,i,o,a,s,c,A,j,z,b/=O,k/=O,_,y,M),M.point(A,j),e(A,j,z,b,k,_,l,f,h,p,d,m,y,M))}}return function(n){var r,i,o,a,u,s,c,l,f,h,p,v,d={point:g,lineStart:m,lineEnd:M,polygonStart:function(){n.polygonStart(),d.lineStart=E},polygonEnd:function(){n.polygonEnd(),d.lineStart=m}};function g(e,r){e=t(e,r),n.point(e[0],e[1])}function m(){l=NaN,d.point=y,n.lineStart()}function y(r,i){var o=J([r,i]),a=t(r,i);e(l,f,c,h,p,v,l=a[0],f=a[1],c=r,h=o[0],p=o[1],v=o[2],dr,n),n.point(l,f)}function M(){d.point=g,n.lineEnd()}function E(){m(),d.point=S,d.lineEnd=w}function S(t,n){y(r=t,n),i=l,o=f,a=h,u=p,s=v,d.point=y}function w(){e(l,f,c,h,p,v,i,o,r,a,u,s,dr,n),d.lineEnd=M,M()}return d}}(t,n):function(t){return sr({point:function(n,e){n=t(n,e),this.stream.point(n[0],n[1])}})}(t)};var yr=sr({point:function(t,n){this.stream.point(t*p,n*p)}});function Mr(t,n,e,r){var i=m(r),o=w(r),a=i*t,u=o*t,s=i/t,c=o/t,l=(o*e-i*n)/t,f=(o*n+i*e)/t;function h(t,r){return[a*t-u*r+n,e-u*t-a*r]}return h.invert=function(t,n){return[s*t-c*n+l,f-c*t-s*n]},h}function Er(t){return Sr(function(){return t})()}function Sr(t){var n,e,r,i,o,a,u,s,c,l,f=150,v=480,d=250,g=0,m=0,y=0,M=0,E=0,S=0,w=null,b=_n,k=null,_=ce,P=.5;function O(t){return s(t[0]*p,t[1]*p)}function T(t){return(t=s.invert(t[0],t[1]))&&[t[0]*h,t[1]*h]}function z(){var t=Mr(f,0,0,S).apply(null,n(g,m)),r=(S?Mr:function(t,n,e){function r(r,i){return[n+t*r,e-t*i]}return r.invert=function(r,i){return[(r-n)/t,(e-i)/t]},r})(f,v-t[0],d-t[1],S);return e=en(y,M,E),u=tn(n,r),s=tn(e,u),a=mr(u,P),C()}function C(){return c=l=null,O}return O.stream=function(t){return c&&l===t?c:c=yr(function(t){return sr({point:function(n,e){var r=t(n,e);return this.stream.point(r[0],r[1])}})}(e)(b(a(_(l=t)))))},O.preclip=function(t){return arguments.length?(b=t,w=void 0,C()):b},O.postclip=function(t){return arguments.length?(_=t,k=r=i=o=null,C()):_},O.clipAngle=function(t){return arguments.length?(b=+t?Pn(w=t*p):(w=null,_n),C()):w*h},O.clipExtent=function(t){return arguments.length?(_=null==t?(k=r=i=o=null,ce):Cn(k=+t[0][0],r=+t[0][1],i=+t[1][0],o=+t[1][1]),C()):null==k?null:[[k,r],[i,o]]},O.scale=function(t){return arguments.length?(f=+t,z()):f},O.translate=function(t){return arguments.length?(v=+t[0],d=+t[1],z()):[v,d]},O.center=function(t){return arguments.length?(g=t[0]%360*p,m=t[1]%360*p,z()):[g*h,m*h]},O.rotate=function(t){return arguments.length?(y=t[0]%360*p,M=t[1]%360*p,E=t.length>2?t[2]%360*p:0,z()):[y*h,M*h,E*h]},O.angle=function(t){return arguments.length?(S=t%360*p,z()):S*h},O.precision=function(t){return arguments.length?(a=mr(u,P=t*t),C()):x(P)},O.fitExtent=function(t,n){return fr(O,t,n)},O.fitSize=function(t,n){return hr(O,t,n)},O.fitWidth=function(t,n){return pr(O,t,n)},O.fitHeight=function(t,n){return vr(O,t,n)},function(){return n=t.apply(this,arguments),O.invert=n.invert&&T,z()}}function wr(t){var n=0,e=s/3,r=Sr(t),i=r(n,e);return i.parallels=function(t){return arguments.length?r(n=t[0]*p,e=t[1]*p):[n*h,e*h]},i}function br(t,n){var e=w(t),r=(e+w(n))/2;if(v(r)<u)return function(t){var n=m(t);function e(t,e){return[t*n,w(e)/n]}return e.invert=function(t,e){return[t/n,P(e*n)]},e}(t);var i=1+e*(2*r-e),o=x(i)/r;function a(t,n){var e=x(i-2*r*w(n))/r;return[e*w(t*=r),o-e*m(t)]}return a.invert=function(t,n){var e=o-n;return[g(t,v(e))/r*b(e),P((i-(t*t+e*e)*r*r)/(2*r))]},a}var xr=function(){return wr(br).scale(155.424).center([0,33.6442])},kr=function(){return xr().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])};var _r=function(){var t,n,e,r,i,o,a=kr(),s=xr().rotate([154,0]).center([-2,58.5]).parallels([55,65]),c=xr().rotate([157,0]).center([-3,19.9]).parallels([8,18]),l={point:function(t,n){o=[t,n]}};function f(t){var n=t[0],a=t[1];return o=null,e.point(n,a),o||(r.point(n,a),o)||(i.point(n,a),o)}function h(){return t=n=null,f}return f.invert=function(t){var n=a.scale(),e=a.translate(),r=(t[0]-e[0])/n,i=(t[1]-e[1])/n;return(i>=.12&&i<.234&&r>=-.425&&r<-.214?s:i>=.166&&i<.234&&r>=-.214&&r<-.115?c:a).invert(t)},f.stream=function(e){return t&&n===e?t:t=function(t){var n=t.length;return{point:function(e,r){for(var i=-1;++i<n;)t[i].point(e,r)},sphere:function(){for(var e=-1;++e<n;)t[e].sphere()},lineStart:function(){for(var e=-1;++e<n;)t[e].lineStart()},lineEnd:function(){for(var e=-1;++e<n;)t[e].lineEnd()},polygonStart:function(){for(var e=-1;++e<n;)t[e].polygonStart()},polygonEnd:function(){for(var e=-1;++e<n;)t[e].polygonEnd()}}}([a.stream(n=e),s.stream(e),c.stream(e)])},f.precision=function(t){return arguments.length?(a.precision(t),s.precision(t),c.precision(t),h()):a.precision()},f.scale=function(t){return arguments.length?(a.scale(t),s.scale(.35*t),c.scale(t),f.translate(a.translate())):a.scale()},f.translate=function(t){if(!arguments.length)return a.translate();var n=a.scale(),o=+t[0],f=+t[1];return e=a.translate(t).clipExtent([[o-.455*n,f-.238*n],[o+.455*n,f+.238*n]]).stream(l),r=s.translate([o-.307*n,f+.201*n]).clipExtent([[o-.425*n+u,f+.12*n+u],[o-.214*n-u,f+.234*n-u]]).stream(l),i=c.translate([o-.205*n,f+.212*n]).clipExtent([[o-.214*n+u,f+.166*n+u],[o-.115*n-u,f+.234*n-u]]).stream(l),h()},f.fitExtent=function(t,n){return fr(f,t,n)},f.fitSize=function(t,n){return hr(f,t,n)},f.fitWidth=function(t,n){return pr(f,t,n)},f.fitHeight=function(t,n){return vr(f,t,n)},f.scale(1070)};function Pr(t){return function(n,e){var r=m(n),i=m(e),o=t(r*i);return[o*i*w(n),o*w(e)]}}function Or(t){return function(n,e){var r=x(n*n+e*e),i=t(r),o=w(i),a=m(i);return[g(n*o,r*a),P(r&&e*o/r)]}}var Tr=Pr(function(t){return x(2/(1+t))});Tr.invert=Or(function(t){return 2*P(t/2)});var zr=function(){return Er(Tr).scale(124.75).clipAngle(179.999)},Cr=Pr(function(t){return(t=_(t))&&t/w(t)});Cr.invert=Or(function(t){return t});var Ar=function(){return Er(Cr).scale(79.4188).clipAngle(179.999)};function jr(t,n){return[t,E(k((c+n)/2))]}jr.invert=function(t,n){return[t,2*d(M(n))-c]};var Lr=function(){return Dr(jr).scale(961/f)};function Dr(t){var n,e,r,i=Er(t),o=i.center,a=i.scale,u=i.translate,c=i.clipExtent,l=null;function f(){var o=s*a(),u=i(un(i.rotate()).invert([0,0]));return c(null==l?[[u[0]-o,u[1]-o],[u[0]+o,u[1]+o]]:t===jr?[[Math.max(u[0]-o,l),n],[Math.min(u[0]+o,e),r]]:[[l,Math.max(u[1]-o,n)],[e,Math.min(u[1]+o,r)]])}return i.scale=function(t){return arguments.length?(a(t),f()):a()},i.translate=function(t){return arguments.length?(u(t),f()):u()},i.center=function(t){return arguments.length?(o(t),f()):o()},i.clipExtent=function(t){return arguments.length?(null==t?l=n=e=r=null:(l=+t[0][0],n=+t[0][1],e=+t[1][0],r=+t[1][1]),f()):null==l?null:[[l,n],[e,r]]},f()}function Nr(t){return k((c+t)/2)}function Rr(t,n){var e=m(t),r=t===n?w(t):E(e/m(n))/E(Nr(n)/Nr(t)),i=e*S(Nr(t),r)/r;if(!r)return jr;function o(t,n){i>0?n<-c+u&&(n=-c+u):n>c-u&&(n=c-u);var e=i/S(Nr(n),r);return[e*w(r*t),i-e*m(r*t)]}return o.invert=function(t,n){var e=i-n,o=b(r)*x(t*t+e*e);return[g(t,v(e))/r*b(e),2*d(S(i/o,1/r))-c]},o}var qr=function(){return wr(Rr).scale(109.5).parallels([30,30])};function Ir(t,n){return[t,n]}Ir.invert=Ir;var Zr=function(){return Er(Ir).scale(152.63)};function Gr(t,n){var e=m(t),r=t===n?w(t):(e-m(n))/(n-t),i=e/r+t;if(v(r)<u)return Ir;function o(t,n){var e=i-n,o=r*t;return[e*w(o),i-e*m(o)]}return o.invert=function(t,n){var e=i-n;return[g(t,v(e))/r*b(e),i-b(r)*x(t*t+e*e)]},o}var Vr=function(){return wr(Gr).scale(131.154).center([0,13.9389])},Fr=1.340264,Br=-.081106,Ur=893e-6,Yr=.003796,Hr=x(3)/2;function Wr(t,n){var e=P(Hr*w(n)),r=e*e,i=r*r*r;return[t*m(e)/(Hr*(Fr+3*Br*r+i*(7*Ur+9*Yr*r))),e*(Fr+Br*r+i*(Ur+Yr*r))]}Wr.invert=function(t,n){for(var e,r=n,i=r*r,o=i*i*i,a=0;a<12&&(o=(i=(r-=e=(r*(Fr+Br*i+o*(Ur+Yr*i))-n)/(Fr+3*Br*i+o*(7*Ur+9*Yr*i)))*r)*i*i,!(v(e)<1e-12));++a);return[Hr*t*(Fr+3*Br*i+o*(7*Ur+9*Yr*i))/m(r),P(w(r)/Hr)]};var Xr=function(){return Er(Wr).scale(177.158)};function Jr(t,n){var e=m(n),r=m(t)*e;return[e*w(t)/r,w(n)/r]}Jr.invert=Or(d);var Kr=function(){return Er(Jr).scale(144.049).clipAngle(60)};function Qr(t,n,e,r){return 1===t&&1===n&&0===e&&0===r?ce:sr({point:function(i,o){this.stream.point(i*t+e,o*n+r)}})}var $r=function(){var t,n,e,r,i,o,a=1,u=0,s=0,c=1,l=1,f=ce,h=null,p=ce;function v(){return r=i=null,o}return o={stream:function(t){return r&&i===t?r:r=f(p(i=t))},postclip:function(r){return arguments.length?(p=r,h=t=n=e=null,v()):p},clipExtent:function(r){return arguments.length?(p=null==r?(h=t=n=e=null,ce):Cn(h=+r[0][0],t=+r[0][1],n=+r[1][0],e=+r[1][1]),v()):null==h?null:[[h,t],[n,e]]},scale:function(t){return arguments.length?(f=Qr((a=+t)*c,a*l,u,s),v()):a},translate:function(t){return arguments.length?(f=Qr(a*c,a*l,u=+t[0],s=+t[1]),v()):[u,s]},reflectX:function(t){return arguments.length?(f=Qr(a*(c=t?-1:1),a*l,u,s),v()):c<0},reflectY:function(t){return arguments.length?(f=Qr(a*c,a*(l=t?-1:1),u,s),v()):l<0},fitExtent:function(t,n){return fr(o,t,n)},fitSize:function(t,n){return hr(o,t,n)},fitWidth:function(t,n){return pr(o,t,n)},fitHeight:function(t,n){return vr(o,t,n)}}};function ti(t,n){var e=n*n,r=e*e;return[t*(.8707-.131979*e+r*(r*(.003971*e-.001529*r)-.013791)),n*(1.007226+e*(.015085+r*(.028874*e-.044475-.005916*r)))]}ti.invert=function(t,n){var e,r=n,i=25;do{var o=r*r,a=o*o;r-=e=(r*(1.007226+o*(.015085+a*(.028874*o-.044475-.005916*a)))-n)/(1.007226+o*(.045255+a*(.259866*o-.311325-.005916*11*a)))}while(v(e)>u&&--i>0);return[t/(.8707+(o=r*r)*(o*(o*o*o*(.003971-.001529*o)-.013791)-.131979)),r]};var ni=function(){return Er(ti).scale(175.295)};function ei(t,n){return[m(n)*w(t),w(n)]}ei.invert=Or(P);var ri=function(){return Er(ei).scale(249.5).clipAngle(90+u)};function ii(t,n){var e=m(n),r=1+m(t)*e;return[e*w(t)/r,w(n)/r]}ii.invert=Or(function(t){return 2*d(t)});var oi=function(){return Er(ii).scale(250).clipAngle(142)};function ai(t,n){return[E(k((c+n)/2)),-t]}ai.invert=function(t,n){return[-n,2*d(M(t))-c]};var ui=function(){var t=Dr(ai),n=t.center,e=t.rotate;return t.center=function(t){return arguments.length?n([-t[1],t[0]]):[(t=n())[1],-t[0]]},t.rotate=function(t){return arguments.length?e([t[0],t[1],t.length>2?t[2]+90:90]):[(t=e())[0],t[1],t[2]-90]},e([0,0,90]).scale(159.155)};e.d(n,"geoArea",function(){return W}),e.d(n,"geoBounds",function(){return Zt}),e.d(n,"geoCentroid",function(){return Qt}),e.d(n,"geoCircle",function(){return ln}),e.d(n,"geoClipAntimeridian",function(){return _n}),e.d(n,"geoClipCircle",function(){return Pn}),e.d(n,"geoClipExtent",function(){return Dn}),e.d(n,"geoClipRectangle",function(){return Cn}),e.d(n,"geoContains",function(){return $n}),e.d(n,"geoDistance",function(){return Bn}),e.d(n,"geoGraticule",function(){return ee}),e.d(n,"geoGraticule10",function(){return re}),e.d(n,"geoInterpolate",function(){return se}),e.d(n,"geoLength",function(){return Gn}),e.d(n,"geoPath",function(){return ar}),e.d(n,"geoAlbers",function(){return kr}),e.d(n,"geoAlbersUsa",function(){return _r}),e.d(n,"geoAzimuthalEqualArea",function(){return zr}),e.d(n,"geoAzimuthalEqualAreaRaw",function(){return Tr}),e.d(n,"geoAzimuthalEquidistant",function(){return Ar}),e.d(n,"geoAzimuthalEquidistantRaw",function(){return Cr}),e.d(n,"geoConicConformal",function(){return qr}),e.d(n,"geoConicConformalRaw",function(){return Rr}),e.d(n,"geoConicEqualArea",function(){return xr}),e.d(n,"geoConicEqualAreaRaw",function(){return br}),e.d(n,"geoConicEquidistant",function(){return Vr}),e.d(n,"geoConicEquidistantRaw",function(){return Gr}),e.d(n,"geoEqualEarth",function(){return Xr}),e.d(n,"geoEqualEarthRaw",function(){return Wr}),e.d(n,"geoEquirectangular",function(){return Zr}),e.d(n,"geoEquirectangularRaw",function(){return Ir}),e.d(n,"geoGnomonic",function(){return Kr}),e.d(n,"geoGnomonicRaw",function(){return Jr}),e.d(n,"geoIdentity",function(){return $r}),e.d(n,"geoProjection",function(){return Er}),e.d(n,"geoProjectionMutator",function(){return Sr}),e.d(n,"geoMercator",function(){return Lr}),e.d(n,"geoMercatorRaw",function(){return jr}),e.d(n,"geoNaturalEarth1",function(){return ni}),e.d(n,"geoNaturalEarth1Raw",function(){return ti}),e.d(n,"geoOrthographic",function(){return ri}),e.d(n,"geoOrthographicRaw",function(){return ei}),e.d(n,"geoStereographic",function(){return oi}),e.d(n,"geoStereographicRaw",function(){return ii}),e.d(n,"geoTransverseMercator",function(){return ui}),e.d(n,"geoTransverseMercatorRaw",function(){return ai}),e.d(n,"geoRotation",function(){return un}),e.d(n,"geoStream",function(){return Z}),e.d(n,"geoTransform",function(){return ur})},function(t,n,e){"use strict";e.r(n);var r=function(t){return t},i=function(t){if(null==t)return r;var n,e,i=t.scale[0],o=t.scale[1],a=t.translate[0],u=t.translate[1];return function(t,r){r||(n=e=0);var s=2,c=t.length,l=new Array(c);for(l[0]=(n+=t[0])*i+a,l[1]=(e+=t[1])*o+u;s<c;)l[s]=t[s],++s;return l}},o=function(t){var n,e=i(t.transform),r=1/0,o=r,a=-r,u=-r;function s(t){(t=e(t))[0]<r&&(r=t[0]),t[0]>a&&(a=t[0]),t[1]<o&&(o=t[1]),t[1]>u&&(u=t[1])}function c(t){switch(t.type){case"GeometryCollection":t.geometries.forEach(c);break;case"Point":s(t.coordinates);break;case"MultiPoint":t.coordinates.forEach(s)}}for(n in t.arcs.forEach(function(t){for(var n,i=-1,s=t.length;++i<s;)(n=e(t[i],i))[0]<r&&(r=n[0]),n[0]>a&&(a=n[0]),n[1]<o&&(o=n[1]),n[1]>u&&(u=n[1])}),t.objects)c(t.objects[n]);return[r,o,a,u]},a=function(t,n){for(var e,r=t.length,i=r-n;i<--r;)e=t[i],t[i++]=t[r],t[r]=e},u=function(t,n){return"GeometryCollection"===n.type?{type:"FeatureCollection",features:n.geometries.map(function(n){return s(t,n)})}:s(t,n)};function s(t,n){var e=n.id,r=n.bbox,i=null==n.properties?{}:n.properties,o=c(t,n);return null==e&&null==r?{type:"Feature",properties:i,geometry:o}:null==r?{type:"Feature",id:e,properties:i,geometry:o}:{type:"Feature",id:e,bbox:r,properties:i,geometry:o}}function c(t,n){var e=i(t.transform),r=t.arcs;function o(t,n){n.length&&n.pop();for(var i=r[t<0?~t:t],o=0,u=i.length;o<u;++o)n.push(e(i[o],o));t<0&&a(n,u)}function u(t){return e(t)}function s(t){for(var n=[],e=0,r=t.length;e<r;++e)o(t[e],n);return n.length<2&&n.push(n[0]),n}function c(t){for(var n=s(t);n.length<4;)n.push(n[0]);return n}function l(t){return t.map(c)}return function t(n){var e,r=n.type;switch(r){case"GeometryCollection":return{type:r,geometries:n.geometries.map(t)};case"Point":e=u(n.coordinates);break;case"MultiPoint":e=n.coordinates.map(u);break;case"LineString":e=s(n.arcs);break;case"MultiLineString":e=n.arcs.map(s);break;case"Polygon":e=l(n.arcs);break;case"MultiPolygon":e=n.arcs.map(l);break;default:return null}return{type:r,coordinates:e}}(n)}var l=function(t,n){var e={},r={},i={},o=[],a=-1;function u(t,n){for(var r in t){var i=t[r];delete n[i.start],delete i.start,delete i.end,i.forEach(function(t){e[t<0?~t:t]=1}),o.push(i)}}return n.forEach(function(e,r){var i,o=t.arcs[e<0?~e:e];o.length<3&&!o[1][0]&&!o[1][1]&&(i=n[++a],n[a]=e,n[r]=i)}),n.forEach(function(n){var e,o,a=function(n){var e,r=t.arcs[n<0?~n:n],i=r[0];t.transform?(e=[0,0],r.forEach(function(t){e[0]+=t[0],e[1]+=t[1]})):e=r[r.length-1];return n<0?[e,i]:[i,e]}(n),u=a[0],s=a[1];if(e=i[u])if(delete i[e.end],e.push(n),e.end=s,o=r[s]){delete r[o.start];var c=o===e?e:e.concat(o);r[c.start=e.start]=i[c.end=o.end]=c}else r[e.start]=i[e.end]=e;else if(e=r[s])if(delete r[e.start],e.unshift(n),e.start=u,o=i[u]){delete i[o.end];var l=o===e?e:o.concat(e);r[l.start=o.start]=i[l.end=e.end]=l}else r[e.start]=i[e.end]=e;else r[(e=[n]).start=u]=i[e.end=s]=e}),u(i,r),u(r,i),n.forEach(function(t){e[t<0?~t:t]||o.push([t])}),o},f=function(t){return c(t,h.apply(this,arguments))};function h(t,n,e){var r,i,o;if(arguments.length>1)r=function(t,n,e){var r,i=[],o=[];function a(t){var n=t<0?~t:t;(o[n]||(o[n]=[])).push({i:t,g:r})}function u(t){t.forEach(a)}function s(t){t.forEach(u)}return function t(n){switch(r=n,n.type){case"GeometryCollection":n.geometries.forEach(t);break;case"LineString":u(n.arcs);break;case"MultiLineString":case"Polygon":s(n.arcs);break;case"MultiPolygon":!function(t){t.forEach(s)}(n.arcs)}}(n),o.forEach(null==e?function(t){i.push(t[0].i)}:function(t){e(t[0].g,t[t.length-1].g)&&i.push(t[0].i)}),i}(0,n,e);else for(i=0,r=new Array(o=t.arcs.length);i<o;++i)r[i]=i;return{type:"MultiLineString",arcs:l(t,r)}}var p=function(t){return c(t,v.apply(this,arguments))};function v(t,n){var e={},r=[],i=[];function o(t){t.forEach(function(n){n.forEach(function(n){(e[n=n<0?~n:n]||(e[n]=[])).push(t)})}),r.push(t)}function a(n){return function(t){for(var n,e=-1,r=t.length,i=t[r-1],o=0;++e<r;)n=i,i=t[e],o+=n[0]*i[1]-n[1]*i[0];return Math.abs(o)}(c(t,{type:"Polygon",arcs:[n]}).coordinates[0])}return n.forEach(function t(n){switch(n.type){case"GeometryCollection":n.geometries.forEach(t);break;case"Polygon":o(n.arcs);break;case"MultiPolygon":n.arcs.forEach(o)}}),r.forEach(function(t){if(!t._){var n=[],r=[t];for(t._=1,i.push(n);t=r.pop();)n.push(t),t.forEach(function(t){t.forEach(function(t){e[t<0?~t:t].forEach(function(t){t._||(t._=1,r.push(t))})})})}}),r.forEach(function(t){delete t._}),{type:"MultiPolygon",arcs:i.map(function(n){var r,i=[];if(n.forEach(function(t){t.forEach(function(t){t.forEach(function(t){e[t<0?~t:t].length<2&&i.push(t)})})}),(r=(i=l(t,i)).length)>1)for(var o,u,s=1,c=a(i[0]);s<r;++s)(o=a(i[s]))>c&&(u=i[0],i[0]=i[s],i[s]=u,c=o);return i})}}var d=function(t,n){for(var e=0,r=t.length;e<r;){var i=e+r>>>1;t[i]<n?e=i+1:r=i}return e},g=function(t){var n={},e=t.map(function(){return[]});function r(t,e){t.forEach(function(t){t<0&&(t=~t);var r=n[t];r?r.push(e):n[t]=[e]})}function i(t,n){t.forEach(function(t){r(t,n)})}var o={LineString:r,MultiLineString:i,Polygon:i,MultiPolygon:function(t,n){t.forEach(function(t){i(t,n)})}};for(var a in t.forEach(function t(n,e){"GeometryCollection"===n.type?n.geometries.forEach(function(n){t(n,e)}):n.type in o&&o[n.type](n.arcs,e)}),n)for(var u=n[a],s=u.length,c=0;c<s;++c)for(var l=c+1;l<s;++l){var f,h=u[c],p=u[l];(f=e[h])[a=d(f,p)]!==p&&f.splice(a,0,p),(f=e[p])[a=d(f,h)]!==h&&f.splice(a,0,h)}return e},m=function(t){if(null==t)return r;var n,e,i=t.scale[0],o=t.scale[1],a=t.translate[0],u=t.translate[1];return function(t,r){r||(n=e=0);var s=2,c=t.length,l=new Array(c),f=Math.round((t[0]-a)/i),h=Math.round((t[1]-u)/o);for(l[0]=f-n,n=f,l[1]=h-e,e=h;s<c;)l[s]=t[s],++s;return l}},y=function(t,n){if(t.transform)throw new Error("already quantized");if(n&&n.scale)s=t.bbox;else{if(!((e=Math.floor(n))>=2))throw new Error("n must be â¥2");var e,r=(s=t.bbox||o(t))[0],i=s[1],a=s[2],u=s[3];n={scale:[a-r?(a-r)/(e-1):1,u-i?(u-i)/(e-1):1],translate:[r,i]}}var s,c,l=m(n),f=t.objects,h={};function p(t){return l(t)}function v(t){var n;switch(t.type){case"GeometryCollection":n={type:"GeometryCollection",geometries:t.geometries.map(v)};break;case"Point":n={type:"Point",coordinates:p(t.coordinates)};break;case"MultiPoint":n={type:"MultiPoint",coordinates:t.coordinates.map(p)};break;default:return t}return null!=t.id&&(n.id=t.id),null!=t.bbox&&(n.bbox=t.bbox),null!=t.properties&&(n.properties=t.properties),n}for(c in f)h[c]=v(f[c]);return{type:"Topology",bbox:s,transform:n,objects:h,arcs:t.arcs.map(function(t){var n,e=0,r=1,i=t.length,o=new Array(i);for(o[0]=l(t[0],0);++e<i;)((n=l(t[e],e))[0]||n[1])&&(o[r++]=n);return 1===r&&(o[r++]=[0,0]),o.length=r,o})}};e.d(n,"bbox",function(){return o}),e.d(n,"feature",function(){return u}),e.d(n,"mesh",function(){return f}),e.d(n,"meshArcs",function(){return h}),e.d(n,"merge",function(){return p}),e.d(n,"mergeArcs",function(){return v}),e.d(n,"neighbors",function(){return g}),e.d(n,"quantize",function(){return y}),e.d(n,"transform",function(){return i}),e.d(n,"untransform",function(){return m})}])});
//# sourceMappingURL=LightningMaps.min.js.map